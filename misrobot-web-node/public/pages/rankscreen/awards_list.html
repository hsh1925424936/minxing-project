<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="../../js/rankscreen/layout.js" ></script>
		<meta charset="UTF-8">
		<title>获奖名单</title>
		<style type="text/css">
			body{
				width:100%; height:100%; overflow:hidden;
			}

			.titOuter{
				width:100vw; height:11vh; color:white; position:relative;
				font-weight:bold;
				background-image:url(../../images/rankscreen/paihang-top.png);
				background-repeat:no-repeat; background-size:100% 100%;
			}
			.titOuter img{
				width:7.3vh; height:7.3vh; float:left; display:block;
				margin-left:3.9vw; position:relative; top:50%; margin-top:-3.65vh;
			}
			.titOuter h2{
				height:100%; font-size:5.5vh; top:0; left:0; width:100%;
				line-height:11.5vh; position:absolute; text-align:center;
				font-weight:bold;
			}
			
			.sub_tit{
				width:100%; height:8.4vh; background-color:#0030AC; color:white;
				font-size:4.7vh; line-height:8.4vh; text-align:center;
			}

			.mainOuter{
				width:100%; height:74.3vh; background-color:#0069C4;
				overflow:hidden;
			}
			.mainOuter>h1{
				width:100%; height:9.1vh; line-height:9.1vh;
				text-align:center; font-size:5.5vh; color:#FFF000;
				font-family:华文行楷;
			}
			.groupawardCon{
				width:100%; height:25vh;
			}
			.first_class{
				width:7.1vh; height:10vh; margin:auto; color:#FFF000; font-size:3vh;
				line-height:13vh; text-align:center;
				background-image:url(../../images/rankscreen/guanjun-lan.png);
				background-size:100% 100%; background-repeat:no-repeat;
				margin-bottom:1vh;
			}
			.groupawardInner{
				width:80vw; margin:auto;
			}
			.groupawardInner>h5{
				float:left; width:33.33%; height:2.25vh;
			}
			.texth5{
				font-size:3.4vh; color:white; line-height:4vh; text-align:center;
			}
			.texth52{
				font-size:3.4vh; color:#FFF000; text-align:center; line-height:0;
			}
			.rectangle{
				background-color:#FFF000; box-sizing:border-box;
				border-right:1px solid #0069C4; border-bottom:1px solid #0069C4;
				
			}

			.singleawardCon{
				width:80vw; margin:auto;
				border-left:1px solid rgba(255,255,255,0.2);
				border-top:1px solid rgba(255,255,255,0.2);
			}
			.singleawardBox{
				width:50%; height:8.38vh; box-sizing:border-box; float:left;
				border-right:1px solid rgba(255,255,255,0.2);
				border-bottom:1px solid rgba(255,255,255,0.2);
			}
			.singleawardBox>span{
				width:6.1vw; height:7vh; display:block; float:left;
				background-image:url(../../images/rankscreen/jiangbei.png);
				background-repeat:no-repeat; background-size:100% 100%;
				margin-top:1.1vh; margin-left:1vw;
			}
			.wordOuter{
				width:32vw; height:100%; float:left;
			}
			.wordOuter h3{
				font-size:3.3vh; line-height:4vh; color:white; margin-top:1vh;
			}
			.wordOuter span{
				color:#FFF000;
			}
			.wordOuter h5{
				font-size:2.9vh; line-height:3.2vh; color:white;
			}

			.footCon{
				width:100%; height:6.32vh;
				background-image:url(../../images/rankscreen/ranking_bottom.png);
				background-size:100% 100%; background-repeat:no-repeat;
			}
		</style>	
		
		
	</head>
	<body>
		<div class="titOuter">
			<img src="../../images/rankscreen/wuda_logo.png">
			<h2>武汉大学医学部第二届临床医学专业学生临床技能竞赛-初赛</h2>
		</div>
		
		<div class="sub_tit">
			获奖名单公布
		</div>

		<div class="mainOuter">
			<h1>团体奖</h1>
			<div class="groupawardCon">
				<div class="first_class">
					
				</div>
				<div class="groupawardInner clearfix">
					<h5 class="texth52 secondClass"></h5>
					<h5 class="rectangle"></h5>
					<h5></h5>
					<h5 class="rectangle"></h5>
					<h5 class="rectangle"></h5>
					<h5 class="texth52 thirdClass"></h5>
					<h5 class="rectangle"></h5>
					<h5 class="rectangle"></h5>
					<h5 class="rectangle"></h5>
					<h5 class="texth5">二等奖</h5>
					<h5 class="texth5">一等奖</h5>
					<h5 class="texth5">三等奖</h5>
				</div>
			</div>
			<h1>单项奖</h1>
			<div class="singleawardCon clearfix">
				<div class="singleawardBox">
					<span></span>
					<div class="wordOuter">
						<h3>
							<span></span>
						</h3>
						<h5>
							
						</h5>
					</div>
				</div>
				<div class="singleawardBox">
					<span></span>
					<div class="wordOuter">
						<h3>
							<span></span>
						</h3>
						<h5>
							
						</h5>
					</div>
				</div>
				<div class="singleawardBox">
					<span></span>
					<div class="wordOuter">
						<h3>
							<span></span>
						</h3>
						<h5>
							
						</h5>
					</div>
					
				</div>
				<div class="singleawardBox">
					<span></span>
					<div class="wordOuter">
						<h3>
							<span></span>
						</h3>
						<h5>
							
						</h5>
					</div>
					
				</div>
				<div class="singleawardBox">
					<span></span>
					<div class="wordOuter">
						<h3>
							<span></span>
						</h3>
						<h5>
							
						</h5>
					</div>
					
				</div>
				<div class="singleawardBox">
					<span></span>
					<div class="wordOuter">
						<h3>
							<span></span>
						</h3>
						<h5>
							
						</h5>
					</div>
					
				</div>
			</div>
		</div>

		<div class="footCon">
			
		</div>

	</body>
	
	<script type="text/javascript">
		$(function() {
			showData();
		});

		function showData(){
			var examid2 = GetQueryString('2');//复赛的examid
			var examid3 = GetQueryString('3');//决赛的examid
			var json = {//单项奖
				'1':{
					command:'osce/report/individualawards' //接口地址
				}
			};

			Api.dataToJava({
				json:{
					url:'/osce/report/individualawards', //一次性走几个接口
					data:JSON.stringify(json)
				},
				fn:function (base) {
					base = base[1]; //取接口的第一个返回值
					console.log(base);
					
					//判断接口是否走成功， errcode为0是成功
					if (base.errcode!=0) {
						//uselayer(3,base.errdesc);
						return false;
					}
					
					(function (){//单项奖数据
						for ( var i = 0; i < 6; i++ ){
							var stuArr = base.singleresult[i].student.split('@');
							var str = 
							'<span>'+base.singleresult[i].awardname+'奖项:</span>'+
							'&nbsp;&nbsp;'+stuArr[0]+(stuArr[1]?',&nbsp;&nbsp;'+stuArr[1]:'');
							$('.singleawardCon h3').eq(i).html(str);
						}

						for ( var i = 0; i < 6; i++ ){
							var scoreArr = base.singleresult[i].scoredetail.split('@');
							var str =
								'本项评分:&nbsp;&nbsp;'+scoreArr[0];
							$('.singleawardCon h5').eq(i).html(str);
						}
					})();
				}
			});

			//团体奖-一等奖 二等奖
			var json = {
				'1':{
					command:'osce/report/matchcurrentreport', //接口地址
					examid:examid3
				}
			};

			Api.dataToJava({
				json:{
					url:'/osce/report/matchcurrentreport', //一次性走几个接口
					data:JSON.stringify(json)
				},
				fn:function (base) {
					
					base = base[1]; //取接口的第一个返回值
					console.log(base);
					
					//判断接口是否走成功， errcode为0是成功
					if (base.errcode!=0) {
						//uselayer(3,base.errdesc);
						return false;
					}

					var matchresult = base.matchresult.matchresult;

					var sort_matchresult = [];
					for ( var i = 0; i < matchresult.length; i++ ){
						for ( var j = 0; j < matchresult.length; j++ ){
							if( matchresult[j].ranklist == (i+1) ){
								sort_matchresult.push(matchresult[j]);
							}
						}
					}

					$('.first_class').html(sort_matchresult[0].examineeid+'队');
					$('.secondClass').html(sort_matchresult[1].examineeid+'队/'+sort_matchresult[2].examineeid+'队');

				}
			});

			//团体奖-三等奖
			var json = {
				'1':{
					command:'osce/report/matchcurrentreport', //接口地址
					examid:examid2
				}
			};

			Api.dataToJava({
				json:{
					url:'/osce/report/matchcurrentreport', //一次性走几个接口
					data:JSON.stringify(json)
				},
				fn:function (base) {
					
					base = base[1]; //取接口的第一个返回值
					console.log(base);
					
					//判断接口是否走成功， errcode为0是成功
					if (base.errcode!=0) {
						//uselayer(3,base.errdesc);
						return false;
					}

					var matchresult = base.matchresult.matchresult;

					var sort_matchresult = [];
					for ( var i = 0; i < matchresult.length; i++ ){
						for ( var j = 0; j < matchresult.length; j++ ){
							if( matchresult[j].ranklist == (i+1) ){
								sort_matchresult.push(matchresult[j]);
							}
						}
					}

					$('.thirdClass').html(sort_matchresult[3].examineeid+'队/'+sort_matchresult[4].examineeid+'队/'+sort_matchresult[5].examineeid+'队');

				}
			});
		}
	</script>

</html>
