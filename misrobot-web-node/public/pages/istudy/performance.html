<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="../../js/istudy/layout.js" ></script>
		<meta charset="UTF-8">
		<title>课堂表现</title>
		<style>
			html,body { width: 100%; height: 100%; background: #efeff4;}

			
			.report-info { height: 18%; width: 100%; padding: 0 5%; background: #fff; margin-bottom: 2%;}
			.report-info h3 { height: 34%; line-height: 200%; font-size: 18px;}
			.report-info p { height: 24%;}
			
			.report { display: block;}
			.report-list { background: #fff; border-bottom: 1px solid #ccc;}
			.report-list-left { float: left; width: 14%; text-align: center;}
			.report-list-left span { display: block; margin: 20% auto; width: 30px; height: 30px; line-height: 30px; font-size: 18px; border-radius:50% ; background: #5ca8d9;}
			.report-list-right { float: left; width: 84%; }
			.report-list-right h3 {line-height: 150%; font-weight: normal; font-size: 18px; padding-top:2%}
			.report-list-right p { line-height: 200%; }
			.report-list-right p strong { font-size: 16px;}

			.report-list-right p span { color: #646765; font-size:14px; float: right; padding-right: 1em;}
			.report-list-btn { padding: 3% 5%;}
			.report-list-btn input { float: right; line-height: 200%; width: 40%; margin-left:6%; font-size: 16px; background: #687ead; border: none; color: #fff; border-radius:4px; cursor: pointer;}
			
			.report-answer { width: 80%; height:62%; background: #fff; position: fixed; left: 50%; top: 50%; margin: -60% -40%; z-index: 99; border-radius: 6px; display: none;}
			.report-answer h3 { height: 56px; line-height: 56px; text-align: center;}
			.report-answer div { width: 100%; height: 65%; background: #fff;}
			.report-answer div p { border: 1px solid #ccc; width: 80%; height: 100%; padding: 2% 5%; margin: 0 auto; overflow: auto; word-wrap: break-word; }
			.report-answer div p img { display: block ; width: 100%}
			.report-answer input { display: block; margin: 7% auto; width: 30%; height: 8%;}

			.right { color: green;}
			.wrong { color: #e64119;}

			.big-img { position: fixed; left: 0; top: 50%; width: 100%; z-index: 101; display: none }

		</style>	
	</head>
	<body>

		<div class="sign_bg"></div>
		<div id="header">
			<headerbox thistitle="课堂表现"></headerbox>
		</div>
		<img class = "big-img" />	
		<div class="report-info">
			<h3>课程信息</h3>
			<p>课程名称：</p>
			<p>任课老师：</p>
			<p>班级：</p>
		</div>	
		<div class="report-info">
			<h3>课堂表现</h3>
			<p>被评价人：</p>
			<p>共0题，回答0题，回答正确0题</p>
			<p>正确率：0%</p>				
		</div>
		<script src="../../js/istudy/vueComponent.js"></script>
		<script>
			window.onload = function() {
				'use strict';
				wxcommon(1);
				var str='';
				var username='';
				if(navigator.userAgent.indexOf("iPhone") != -1){
					str =
						'<h3>课程信息</h3>'
						+'<p>课程名称：'+decodeURIComponent(getCookie('gy_istudy_course'))+'</p>'
						+'<p>任课老师：'+decodeURIComponent(getCookie('gy_istudy_teacher'))+'</p>'
						+'<p>班级：'+decodeURIComponent(getCookie('gy_u_classname'))+'</p>';
					username=decodeURIComponent(getCookie('u_name'));
				}else{
					str =
							'<h3>课程信息</h3>'
							+'<p>课程名称：'+decodeURIComponent(getCookie('gy_istudy_course'))+'</p>'
							+'<p>任课老师：'+decodeURIComponent(getCookie('gy_istudy_teacher'))+'</p>'
							+'<p>班级：'+decodeURIComponent(getCookie('gy_u_classname'))+'</p>';
					username=decodeURIComponent(getCookie('u_name'));
				}
				$('.report-info').eq(0).html(str);
				Api.R({
					isShade: 1,
					url: "/question/performance",
					json: {
						"1":{
							command: "question/performance",
							uid: getCookie('gy_u'),
							scheduleid: getCookie('gy_istudy_scid'),
							sessionid: getCookie('gy_t'),
							loginid: getCookie('gy_u')
						}
					},
					fn: function(result) {
						if(result["1"].errcode!=0){
							uselayer(3, result["1"].errdesc);
							return;
						}
						var rightRate=0;
						if(result["1"].qcount==0){
							rightRate=0;
						}else{
							if(result["1"].mycount == 0)
							{
								rightRate=0;
							}
							else
							{
								rightRate=(result["1"].rightcount/result["1"].mycount * 100).toFixed(2);
							}							
						}
						var str = 
								'<h3>课堂表现</h3>'
								+'<p>被评价人：'+username+'</p>'
								+'<p>共' + result["1"].qcount + '题，回答' + result["1"].mycount + '题，回答正确' + result["1"].rightcount +'题</p>'
								+'<p>正确率：' + rightRate + '%</p>';
							$('.report-info').eq(1).html(str);
					},
					error: function(str) {
						uselayer(3, '获取个人课堂信息失败！');
					}
				});
			}
		</script>
		
	</body>
</html>
