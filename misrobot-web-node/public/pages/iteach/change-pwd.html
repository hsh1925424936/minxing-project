<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="../../js/iteach/layout.js" ></script>
		<meta charset="UTF-8">
		<title>修改密码</title>
		<style type="text/css">

			.infoOuter{
				width:100%;
			}

			.infoCon{
				width:100%; height:45px; padding:5px;
				font-size:15px; padding-left:15px; padding-right:15px;
				border-bottom:1px solid #F2F2F4; font-size:14px;
				line-height:40px;
			}
			.infoCon input,.infoCon input:active{
				border:0px;
				box-shadow: none;
			}			
			.save{
				width:90.62%; height:45px; color:white;
				margin:30px auto; background-color:#0495CA; font-size:16px;
				display:block;
			}
			
		</style>
		<script>
			window.onload = function () {
				'use strict';
				webcommon();
				$('.save').click(function () {
					console.log($.trim($('.oldpassword').val()),$.trim($('.newpassword').val()),$.trim($('.newpassword2').val()));
					if ($.trim($('.oldpassword').val())==''||$.trim($('.newpassword').val())==''||$.trim($('.newpassword2').val())=='') {
						uselayer(3,'密码不能为空');
						return false;
					}
					if ($.trim($('.oldpassword').val()).length<6||$.trim($('.newpassword').val()).length<6||$.trim($('.newpassword2').val()).length<6) {
						uselayer(3,'密码长度不正确');
						return false;
					}
					if ($.trim($('.newpassword').val())!=$.trim($('.newpassword2').val())) {
						uselayer(3,'两次新密码输入不一样');
						return false;
					}
					
					Api.R({
						url: "/usr/changepassword"
						isShade:1,
						json:{
							"1": {
								command: "usr/changepassword",
								uid: getCookie('gy_u'),
								sessionid: getCookie('gy_t'),
								oldpassword: $.trim($('.oldpassword').val()),
								newpassword: $.trim($('.newpassword').val())
							}
						},
						fn:function (json) {
							if(json["1"].errcode) {
								uselayer(3, json["1"].errdesc);
								return
							}
							uselayer(1, "修改成功！", function () {
								removeCookie('gy_t');
								window.location.href ="login.html";
							});
						}
					});					
				});
			};
			
			
		</script>
	</head>
	<body>
		
		<div class="box clearfix">
			<div class="outer clearfix">
				<div class="topOuter">
					<div class="return1">
						
					</div>
					<div class="topTxt">
						修改密码
					</div>
				</div>

				<div class="infoOuter">
					<div class="infoCon clearfix">
						<input class="form-control oldpassword" placeholder="输入原始密码" type="password" />
					</div>

					<div class="infoCon clearfix">
						<input class="form-control newpassword" placeholder="输入新密码(6位以上,英文,数字均可)" type="password" />
					</div>

					<div class="infoCon clearfix">
						<input class="form-control newpassword2" placeholder="再输一次新密码" type="password" />
					</div>


				</div>

				<button type="button" class="save">提交</button>

			</div>

		</div>

	</body>
	
</html>
