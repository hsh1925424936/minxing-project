<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="../../js/assistant/layout.js" ></script>
		<meta charset="UTF-8">
		<title>删除题目弹框</title>
		<style type="text/css">
			body{
				background-color:white;
			}
			.allOuter{
				width:480px; margin:auto; border-radius:5px; height:260px;
			}
			.topCon{
				width:100%; height:50px; background-color:#0495CA;
				font-size:16px; line-height:50px; color:white;
			}
			.topCon span:nth-child(1){
				height:100%; display:block; float:left; padding-left:20px;
			}
			.closeSpan{
				width:22px; height:22px; float:right; margin-right:18px;
    			display:block; position: relative; top: 50%;
    			margin-top:-11px; cursor:pointer;
    			background-image:url('../../images/assistant/guanbi-tanchuang.png');
    			background-size:100% 100%; background-repeat:no-repeat;
			}
			.closeSpan img {
    			width:100%; height:100%; display:none;
			}
			.closeSpan:hover img{
				display:block;
			}
			
			.main{
				width:100%; height:105px; margin-top:44px;
			}
			.main img{
				width:46px; height:46px; float:left; display:block;
				margin-left:42px; margin-right:12px;
			}
			.main p{
				float:left; font-size:18px; width:330px; padding-top:8px;
			}
			.BtnCon{
				width:100%;
			}
			.BtnCon button{
				display:block; float:left;
    			height:38px; text-align:center; width:110px;
    			line-height:36px; box-sizing:border-box;
    			border-radius:3px; font-size:16px;
			}
			.BtnCon button:nth-child(1){
				color:white; background-color:#0496ca; margin-left:100px;
			}
			.BtnCon button:nth-child(1):hover{
				background-color:#0487b5;
			}
			.BtnCon button:nth-child(2){
				color:black; background-color:white; border:1px solid #c3c3c3;
				margin-left:20px;
			}
			.BtnCon button:nth-child(2):hover{
				background-color:#f2f2f2; border:1px solid #999999;
			}
			.BtnCon button:nth-child(3){
				color:black; background-color:white; border:1px solid #c3c3c3;
				margin-left:20px;
			}
			.BtnCon button:nth-child(3):hover{
				background-color:#f2f2f2; border:1px solid #999999;
			}
		</style>
	</head>
	<body>
		<div class="allOuter">
			<div class="topCon">
				<span>提示</span>
				<span class="closeSpan">
					<img src="../../images/assistant/guanbi-tanchuang-h.png">
				</span>
			</div>

			<div class="main">
				<img src="../../images/assistant/hint.png">
				<p>需要从题库中删除本题目吗?</p>
			</div>

			<div class="BtnCon clearfix">
				<button class="lesson_del">仅本堂课不用</button>
				<button class="del_bth">删除题库题目</button>
				<button class="closeBtn">取消</button>
			</div>
		</div>
	</body>
	
	<script type="text/javascript">
        $('.lesson_del').click(function() {//仅本堂课不用
			del_problem(0);
		});
		$('.del_bth').click(function() {//从题库中删除题目
			del_problem(1);
		});
	
	function del_problem(whichBtn){
		var qid = GetQueryString('qid');
		var scheduleid = GetQueryString('scheduleid');
		if ( whichBtn == 1 ){//从题库中删除题目
			var json = {
				'1':{
					command:'question/delquestion', //接口地址
					qid:qid,
					sessionid:getCookie('sid'),
					loginid:getCookie('loginid')
				}
			};
			json = {
				url:'/question/delquestion', //一次性走几个接口
				data:JSON.stringify(json)
			};
		}else{//仅本堂课不用的题目
			var json = {
				'1':{
					command:'question/choosequestions', //接口地址
					scheduleid:scheduleid,
					sessionid:getCookie('sid'),
					delqids:[{qid:qid}],
					loginid:getCookie('loginid')
				}
			};
			json = {
				url:'/question/choosequestions', //一次性走几个接口
				data:JSON.stringify(json)
			};
		}
		

		Api.dataToJava({
			json:json,
			fn:function (base) {
				base = base[1]; //取接口的第一个返回值
				console.log(base);
				
				//判断接口是否走成功， errcode为0是成功
				if (base.errcode!=0) {
					uselayer(3,'删除题目失败!'+base.errdesc,function(){
						parent.close_iframe();
					});
					
					return false;
				}
				uselayer(3,'删除题目成功!',function(){
					parent.location.reload();
				});
			}
		});
	}
	</script>

</html>
