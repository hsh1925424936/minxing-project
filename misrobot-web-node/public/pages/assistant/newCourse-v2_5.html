<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Title</title>
    <link rel="stylesheet" href="../../css/scmp/newCourse.css">
    <script src="../../js/jquery-1.11.3.js"></script>
    <script src="../../layer/xie/layer1.js"></script>
    <script src="../../js/scmp/common.js"></script>
    <script src="../../js/vue.js"></script>
    <script src="../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <script src="../../js/scmp/jquery-ui.js"></script>
    <link rel="stylesheet" href="../../css/assistant/style.css">
    <link rel="stylesheet" href="../../bootstrap-3.3.5-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/scmp/scmpcommon.css">
    <style>
        table {
            border-collapse: initial;
        }
        .hovergray:hover{
            background-color: #efefef;
        }
        .hovergray{
            padding:3px 5px;
        }
    </style>
</head>
<body>
<div id="vm" v-cloak>
    <div>
        <div class="noUse"></div>
        <div id="content">
            <div class="must">
                <div class="mustInput">
                    <p class="inputTitle">
                        <b class="icon5">*</b>
                        <span>授课地点：</span>
                    </p>
                    <div class="dropdown">
                        <input type="text" placeholder="输入或选择上课地点" style="font-size:14px;font-family: microsoft yahei" id="inputPlace" :value="choosedPlace" oninput="search(this)" @focus.stop="getPlaceList_focus()">
                        <span @click.stop="getPlaceList()" style="cursor: pointer"><img src="../../images/assistant/down.png" alt=""></span>
                        <ul v-show="showPlace" class="searchul">
                            <li v-for="(value,index) in coursePlace.sitelist" @click="choosePlace(index)">{{value.sitename}}</li>
                        </ul>
                    </div>
                </div>
                <div class="mustInput">
                    <p class="inputTitle">
                        <b class="icon5">*</b>
                        <span>授课老师：</span>
                    </p>
                    <div class="choosedTeacher hide">
                        <span v-for="(value,index) in choosedTeacherList"> {{value.teacherame}} </span>
                    </div>
                    <p class="btnWhite" id="toChooseTeacher" @click="getTeacherList()">选择</p>
                </div>
                <div class="mustInput">
                    <p class="inputTitle">
                        <b class="icon5">*</b>
                        <span>课程：</span>
                    </p>
                    <div class="dropdown">
                        <input type="text" placeholder="输入或选择课程名称" style="font-size:14px;font-family: microsoft yahei" id="inputClassName" :value="choosedCourseName" oninput="search(this)" @focus.stop="getCourseNameList_focus()">
                        <span @click.stop="getCourseNameList()" style="cursor:pointer"><img src="../../images/assistant/down.png" alt=""></span>
                        <ul class="classNameList searchul" v-show="showCourseName">
                            <li v-for="(value,index) in courseNameList.coursenames" @click="chooseCourseName(index)">{{value.coursename}}</li>
                        </ul>
                    </div>
                    <p class="btnWhite" id="newCourseName" @click="newCourse()">新建</p>
                </div>
                <div class="mustInput">
                    <p class="inputTitle">
                        <b class="icon5">*</b>
                        <span>上课时间：</span>
                    </p>
                    <div class="choosedTimeRange hide">
                    </div>
                    <p class="btnWhite" id="toChooseStartTime" @click="setTime()">选择</p>
                </div>
            </div>
            <div id="choice">
                <div class="choiceHead">
                    <span>可选输入信息：</span>
                </div>
                <div class="choiceBox">
                    <div class="mustInput" style="float:none;width:55%;">
                        <p class="inputTitle" style="height:33px;line-height: 33px;">
                            辅教老师：
                        </p>
                        <div class="choosedTeacher2 hide">
                            <span v-for="(value,index) in choosedTeacher2List"> {{ value.teacherame }} </span>
                        </div>
                        <p class="btnWhite" id="chooseTeacher2" @click="teacher2()">选择</p>
                    </div>
                    <div class="exercise">
                        <p class="inputTitle" style="height:33px;line-height: 33px;">
                            训练项：
                        </p>
                        <div id="exercise" class="hide" >
                            <span v-for="(value,index) in choosedExerciseList">{{value.name}} {{value.type | learntype}} ，&nbsp;</span>
                        </div>
                        <p class="btnWhite" id="toChooseExercise" @click="setExercise()">选择</p>
                    </div>
                    <div class="stu">
                        <p class="inputTitle" style="height:33px;line-height: 33px;">
                            学生：
                        </p>
                        <table id="stuMsg" class="table table-bordered" style="table-layout:fixed">
                            <thead>
                            <tr>
                                <th>班级</th>
                                <th>学员</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tfoot>
                            <tr>
                                <td></td>
                                <td></td>
                                <td id="moreStu" @click="stu()" class="poi"><span class="glyphicon glyphicon-plus-sign"> 增加</span></td>
                            </tr>
                            </tfoot>
                            <tbody>
                            <tr v-for="(value,index) in choosedsclasslist2">
                                <td>{{ value.classname }}</td>
                                <td>{{ value.stdlist.length }}</td>
                                <td @click="deletestuitem(index)" class="poi"><span class="glyphicon glyphicon-minus-sign text-warning"> 删除</span></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <p class="beforeClass">
                    <p class="inputTitle" style="height:33px;line-height: 33px;">
                        课前任务：
                    </p>
                    <table id="preExe" class="table table-bordered" style="table-layout:fixed;">
                        <thead>
                        <tr>
                            <th>训练项目</th>
                            <th>最迟完成时间</th>
                            <th>最少完成次数</th>
                            <th>最少完成分钟</th>
                            <th>任务类型</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tfoot>
                        <tr>
                            <td class="relative" id="preExeBox">
                                <p class="m0 poi" onclick="preExeSearch(this,event)">
                                    <span id="choosedPreExe">选择训练项</span>
                                    <i class="glyphicon glyphicon-chevron-down f12 right"></i>
                                </p>
                                <div class="hide">
                                    <p class="relative">
                                        <input type="text" placeholder="搜索训练项" class="f12" oninput="preExeMatch(this)">
                                        <i class="glyphicon glyphicon-search"></i>
                                    </p>
                                    <ul>
                                        <li v-for="(value,index) in exerciseList.learnids" onclick="choosePreExe(this)" :data-learnid="value.learnid" :data-type="value.type" :data-name="value.name" v-show="value.type==0">
                                            <span>{{ value.name }} {{ value.type | learntype }}</span>
                                        </li>
                                    </ul>
                                </div>
                            </td>
                            <td>
                                <span id="lasttime">{{ finishTime.slice(0,16) }}</span>
                                <i class="glyphicon glyphicon-calendar right" onclick="openCalendar()"></i>
                            </td>
                            <td style="padding:4px 8px;">
                                <div class="setNum">
                                    <input type="text" value="0" id="mincount">
                                    <p>
                                        <span class="glyphicon glyphicon-chevron-up f12" onclick="addExeTimes(this)"></span>
                                        <i class="glyphicon glyphicon-chevron-down f12" onclick="reduceExeTimes(this)"></i>
                                    </p>
                                </div>
                            </td>
                            <td><input type="text" placeholder="输入分钟数" id="mintime"></td>
                            <td id="type">
                                <label for="mustExe" class="m0"> 必选 <input type="radio" id="mustExe" name="preExe" checked="true" value="必选"></label>
                                <label for="choiceExe" class="m0"> 推荐 <input type="radio" id="choiceExe" name="preExe" value="推荐"></label>
                            </td>
                            <td @click="preExeSave()" class="poi"><span class="glyphicon glyphicon-circle-arrow-up"></span> 保存</td>
                        </tr>
                        </tfoot>
                        <tbody>
                        <tr v-for="(value,index) in preExeSetted">
                            <td>{{ value.name }} {{value.learntype | learntype }}</td>
                            <td>{{ value.lasttime.slice(0,16) }}</td>
                            <td>{{ value.mincount }}次</td>
                            <td>{{ value.mintime }}分钟</td>
                            <td>{{ value.type | type }}</td>
                            <td class="text-danger poi" @click="deletePreExe(index)"><i class="glyphicon glyphicon-minus-sign" ></i> 删除</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="btns">
            <p class="btnWhite16" onclick="closeAll()">关闭</p>
            <p class="btnBlue16"  @click="saveAll()">保存</p>
        </div>
    </div>
    <div id="shadow" v-show="showShadow">
        <div class="noUse"></div>
        <div id="preExePick" class="hide">
            <p class="pickHead">
                <span>最迟完成时间</span>
                <i class="glyphicon glyphicon-remove rightTop" onclick="closeCalendar()"></i>
            </p>
            <preexetime></preexetime>
            <div id="preExeTime">
                <!--<select name="" id="preExeH">-->
                <!--<option :value="value" v-for="value in endH">{{ value }}</option>-->
                <!--</select>-->
                <div class="dropup poi left">
                        <span id="dLabel" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-default">
                            {{preendh}}
                            <span class="caret"></span>
                        </span>
                    <ul class="dropdown-menu" aria-labelledby="dLabel" style="min-width:80px;height:200px;overflow:auto;">
                        <li v-for="value in endH" @click="preendh=value" class="hovergray poi">{{ value }}</li>
                    </ul>
                </div>
                <!--<select name="" id="preExeMin">-->
                <!--<option :value="value" v-for="value in endMin">{{ value }}</option>-->
                <!--</select>-->
                <div class="left">&nbsp;:&nbsp;</div>
                <div class="dropup poi left">
                        <span id="dLabel1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-default">
                            {{preendmin}}
                            <span class="caret"></span>
                        </span>
                    <ul class="dropdown-menu" aria-labelledby="dLabel" style="min-width:80px;height:200px;overflow:auto;">
                        <li v-for="value in endMin" @click="preendmin=value" class="hovergray poi">{{ value }}</li>
                    </ul>
                </div>
            </div>
            <p class="bottomBtns" style="margin-top:10px;">
                <button class="btn btn-primary" @click="savePreExeTime()">确 定</button>&nbsp;&nbsp;
                <button class="btn btn-default" onclick="closeCalendar()">关 闭</button>
            </p>
        </div>
        <div id="newCourseBox" class="hide">
            <p class="title"><span class="glyphicon glyphicon-remove rightTop" @click="closeNewCourseBox()"></span></p>
            <p>课程名称</p>
            <input type="text" placeholder="请输入需要创建的新课程名称" id="inputNewClassName" v-model="choosedCourseName">
            <div>
                <p class="btnWhite16"  @click="closeNewCourseBox()">取消</p>
                <p class="btnBlue16"  @click="saveCourseName()">确定</p>
            </div>
        </div>
        <div id="setTeacher" class="hide">
            <p class="title m0">
                <b>选择老师</b>
                <span class="glyphicon glyphicon-remove rightTop" @click="closeSetTeacherBox()"></span>
            </p>
            <div class="setTLeft">
                <p class="searchTeacher">
                    <input type="text" placeholder="输入老师名字进行查找">
                        <span class="matchTeacher match" onclick="searchPublic(this)">
                            <b class="icon icon-search anticon find"></b>查找
                        </span>
                </p>
                <ul id="teacherList">
                    <li v-for="(value,index) in teacherList.teacherlist" @click="toggleAddTeacher(index)" :data-uid="value.teacherid">
                        <i class="notChoosed"></i>
                        {{value.teacherame}}
                    </li>
                </ul>
            </div>
            <div class="setTCenter">
                <div class="addOrDelete">
                    <p class="disabled" id="addTeacher" @click="addTeacher()">增加 &gt;&gt;</p>
                    <p class="disabled" style="margin-top:10px" id="removeTeacher" @click="removeTeacher()">&lt;&lt; 删除</p>
                </div>
            </div>
            <div class="setTRight">
                <p>已选老师</p>
                <ul class="choosedList" id="choosedTeacher">
                    <li v-for="(value,index) in choosedTeacherList" @click="toggleGrayRight(index)">
                        {{value.teacherame}}
                    </li>
                </ul>
            </div>
            <div style="clear:both;overflow:hidden;padding:25px 30px 0 0">
                <p class="btnWhite16" id="setTeacherCancel" @click="closeSetTeacherBox()">关闭</p>
                <p class="btnBlue16" id="setTeacherSave" @click="saveTeacher()">确定</p>
            </div>
        </div>
        <div id="newCourseTime" class="hide">
            <p class="title">
                <b>选择上课时间</b>
                <span class="glyphicon glyphicon-remove rightTop" @click="closeTimeBox()"></span>
            </p>
            <div id="CourseTimePick">
                <coursetime></coursetime>
            </div>
            <div class="timeRightBox" style="float: right;">
                <span class="col-sm-2 text-right">开放时段:</span>
                <div class="col-sm-8">
                    <table class="table table-striped table-bordered table-hover" id="setTime">
                        <tr>
                            <th>课节</th>
                            <th>上课时间</th>
                            <th>下课时间</th>
                            <th>开放</th>
                        </tr>
                        <tr v-for="(item,index) in timeList">
                            <td>第{{item.value}}节</td>
                            <td>{{item.starttime | filterFun}}</td>
                            <td>{{item.endtime | filterFun}}</td>
                            <td>
                                <input type="checkbox"    :value="item"  v-model="checkList"/>
                            </td>
                        </tr>
                    </table>
                </div>
                <!--<div class="timeBoxInner">
                    <span>上课时间</span>
                    <div class="timeDrop" @click="showTime0()">
                        <ul class="timeList" v-show="showTimeDrop[0]">
                            <li v-for="(value,index) in startH" @click.stop="setStartH(index)">{{value}}</li>
                        </ul>
                        <span id="beginH">{{time[0]}}</span><i></i>
                    </div>
                    <b>:</b>
                    <div class="timeDrop" @click="showTime1()">
                        <ul class="timeList" v-show="showTimeDrop[1]">
                            <li v-for="(value,index) in startMin" @click.stop="setStartMin(index)">{{value}}</li>
                        </ul>
                        <span id="beginM">{{time[1]}}</span><i></i>
                    </div>
                </div>-->
                <!--<div class="timeBoxInner">
                    <span>下课时间</span>
                    <div class="timeDrop" @click="showTime2()">
                        <ul class="timeList" v-show="showTimeDrop[2]">
                            <li  v-for="(value,index) in endH" @click.stop="setEndH(index)">{{value}}</li>
                        </ul>
                        <span id="endH">{{time[2]}}</span><i></i>
                    </div>
                    <b>:</b>
                    <div class="timeDrop" @click="showTime3()">
                        <ul class="timeList" v-show="showTimeDrop[3]">
                            <li v-for="(value,index) in endMin" @click.stop="setEndMin(index)">{{value}}</li>
                        </ul>
                        <span id="endM">{{time[3]}}</span><i></i>
                    </div>
                </div>-->
            </div>
            <div class="saveCourseTime">
                <p class="btnBlue16" id="saveTime" @click="saveTime()" style="margin-right: 150px;margin-top: 30px;">确定</p>
            </div>
        </div>
        <div id="setStu" class="hide"><!--5.2改造-->
            <p class="title m0">
                <b>选择学员</b>
                <span class="glyphicon glyphicon-remove rightTop" @click="closeStuBox()"></span>
            </p>
            <div class="setTLeft">
                <div id="choosegradebox">
                    <button class="btn btn-default" @click="showGradeList()">
                        {{ choosedsclassname }}
                        <span class="caret"></span>
                    </button>
                    <div class="choosegradecontent" v-show="showGrade">
                        <ul class="sgradelist">
                            <li v-for="(value1,index1) in gradeList" @mouseover="gradeIndex=index1" :class="{ gray:gradeIndex==index1 }">
                                <span class="left">{{ value1.gradename }}</span>
                                <span class="righticon"> &gt; </span>
                            </li>
                        </ul>
                        <ul class="sclasslist" v-for="(value2,index2) in gradeList" v-show="gradeIndex==index2">
                            <li v-for="(value3,index3) in gradeList[index2].classlist" @click.stop="chooseClass(value3)">{{ value3.classname }}</li>
                        </ul>
                    </div>
                </div>
                <ul id="studentList">
                    <li class="grayone" name="first" @click="toggleAll()">
                        <i class="notChoosed" id="chooseAll"></i>
                        <b class="vLine"></b>
                        <span class="stuName">姓名</span>
                        <span class="stuIdTitle">学号</span>
                    </li>
                    <li v-for="(value,index) in stuList.stdlist" @click="toggleStu(index)" :data-id="value.id" :data-sclassid="value.sclassid" :data-name="value.name" :data-code="value.code">
                        <i class="notChoosed"></i>
                        <span class="stuName">{{value.name}}</span>
                        <span class="stuId">{{value.code}}</span>
                    </li>
                </ul>
            </div>
            <div class="setTCenter">
                <div class="addOrDelete">
                    <p class="disabled" id="addStu" @click="addStu()">增加 &gt;&gt;</p>
                    <p class="disabled" style="margin-top:10px" id="removeStu" @click="removeStu()">&lt;&lt; 删除</p>
                </div>
            </div>
            <div class="setTRight">
                <p>已选择成员</p>
                <ul class="choosedStuList">
                    <li class="choosedClassHead" v-for="(value1,index1) in choosedsclasslist1">
                        <input type="checkbox" v-model="removelist" :value="index1">
                        <span>{{ value1.classname }}</span>
                        <ul>
                            <li v-for="(value2,index2) in choosedsclasslist1[index1].stdlist">
                                <span>{{ value2.name }}</span>
                                (<span>{{ value2.code }}</span>)
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div style="clear:both;overflow:hidden;padding:25px 30px 0 0">
                <p class="btnWhite16" id="setStuCancel" @click="closeStuBox()">关闭</p>
                <p class="btnBlue16" id="setStuSave" @click="setStuSave()">确定</p>
            </div>
        </div>
        <div id="setTeacher2" class="hide">
            <p class="title m0">
                <b>选择辅教老师</b>
                <span class="glyphicon glyphicon-remove rightTop" @click="closeTeacher2()"></span>
            </p>
            <div class="setTLeft">
                <p class="searchTeacher">
                    <input type="text" placeholder="输入老师名字进行查找">
                    <span onclick="searchPublic(this)" style="cursor:pointer">查找</span>
                    <span onclick="searchPublic(this)" style="cursor:pointer">查找</span>
                </p>
                <ul id="teacher2List">
                    <li v-for="(value,index) in teacher2List.teacherlist" @click="toggleTeacher2(index)"><i class="notChoosed"></i><span>{{value.teacherame}}</span></li>
                </ul>
            </div>
            <div class="setTCenter">
                <div class="addOrDelete">
                    <p class="disabled" id="addTeacher2" @click="addTeacher2()">增加 &gt;&gt;</p>
                    <p class="disabled" style="margin-top:10px" id="removeTeacher2" @click="removeTeacher2()">&lt;&lt; 删除</p>
                </div>
            </div>
            <div class="setTRight">
                <p>已选辅教老师</p>
                <ul class="choosedList" id="choosedTeacher2">
                    <li v-for="(value,index) in choosedTeacher2List" @click="toggleGrayRight2(index)">{{value.teacherame}}</li>
                </ul>
            </div>
            <div style="clear:both;overflow:hidden;padding:25px 30px 0 0">
                <p class="btnWhite16" id="setTeacher2Cancel" @click="closeTeacher2()">关闭</p>
                <p class="btnBlue16" id="setTeacher2Save" @click="setTeacher2Save()">确定</p>
            </div>
        </div>
        <div id="setExercise" class="hide">
            <p class="title m0">
                <b>选择训练项</b>
                <span class="glyphicon glyphicon-remove rightTop" @click="closeExercise()"></span>
            </p>
            <div class="setTLeft">
                <p class="searchTeacher">
                    <input type="text" placeholder="输入训练项名查找">
                    <span onclick="searchPublic(this)" style="cursor:pointer">查找</span>
                </p>
                <ul id="exerciseList">
                    <li v-for="(value,index) in exerciseList.learnids" @click="toggleExercise(index)">
                        <i class="notChoosed"></i>
                        <span>{{value.name}} {{value.type | learntype }}</span>
                    </li>
                </ul>
            </div>
            <div class="setTCenter">
                <div class="addOrDelete">
                    <p class="disabled" id="addExercise" @click="addExercise()">增加 &gt;&gt;</p>
                    <p class="disabled" style="margin-top:10px" id="removeExercise" @click="removeExercise()">&lt;&lt; 删除</p>
                </div>
            </div>
            <div class="setTRight">
                <p>已选训练项</p>
                <ul class="choosedList" id="choosedExercise">
                    <li v-for="(value,index) in choosedExerciseList" @click="toggleChoosedExercise(index)">{{value.name}} {{value.type | learntype}}</li>
                </ul>
            </div>
            <div style="clear:both;overflow:hidden;padding:25px 30px 0 0">
                <p class="btnWhite16" id="setExerciseCancel" @click="closeExercise()">关闭</p>
                <p class="btnBlue16" id="setExerciseSave" @click="saveExercise()">确定</p>
            </div>
        </div>
    </div>
</div>
<script src="../../js/assistant/newCourse-v2_5.js"></script>
</body>
</html>