<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>数据大屏</title>
    <script src="../../js/jquery-3.1.1.min.js"></script>
    <script src="../../js/vue.js"></script>
    <script src="../../js/echarts.min.js"></script>
    <script src="../../js/bigdatascreen/swiper.min.js"></script>
    <script src="../../js/bigdatascreen/swiper.animate1.0.2.min.js"></script>
    <script src="../../js/jquery.cookie.js"></script>
    <script src="../../js/bigdatascreen/wow.min.js"></script>
    <link rel="stylesheet" href="../../css/bigdatascreen/xstuandteacher.css">
    <link rel="stylesheet" href="../../css/bigdatascreen/swiper.min.css">
    <link rel="stylesheet" href="../../css/bigdatascreen/animate.min.css">
    <style>
        #container2{
            position: absolute;
            overflow: hidden;
            height:100%;
            display:flex;
            width:150%; left:-25%; transform:scale(0.666,1);
            /*width:100%;*/
        }
        .shadow2{
            position: fixed;
            width:calc(1246vw * 100*1.5 / 1920);
            height:100%;
            z-index:9999;
            top:0;
            right:0;
        }
        #content2,#content3{
            width:calc(97.3438vw);
            height:100%;
        }
        .show1{
            display:block;
        }
        .hide1{
            position: absolute;
            top:-10000px;

        }
        .floorimg{

        }
    </style>
</head>
<body>
<div id="container2" v-cloak>
    <iframe src="" frameborder="0" class="shadow2" id="animateshadow"></iframe>
    <div class="u3dwindow">
        <!--<iframe src="background2.html" frameborder="0" class="u3dwindowback"></iframe>-->
        <ul class="description">
            <li v-for="(value,index) in descriptionlist">
                <span class="desctag" :style="{backgroundColor:value.color}"></span>
                <span>{{value.name}}</span>
            </li>
        </ul>
        <div class="selfloor">
            <span>技能中心{{selectedfloor}}楼</span>
        </div>
        <div class="datacollect">
            <span>{{ totalnum }}</span>
            <span class="tiao">条</span>
        </div>
        <div class="floorimg">
            <!--<div class="swiper-container" id="floorimgswiper">-->
                <!--<div class="swiper-wrapper">-->
                    <!--<div class="swiper-slide rotatecontainer">-->
                        <!--<p class="ani rot" swiper-animate-effect="fadeInUp" swiper-animate-duration="1s" swiper-animate-delay="0.1s">-->
                            <!--<img src="../../images/bigdatascreen/2f.png" alt="" class="rotateimg">-->
                        <!--</p>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
            <img :src="imgurlactive" alt="">
        </div>
        <div class="logo">
            <img src="../../images/bigdatascreen/logo_guiyi.png" alt="">
            <span>贵州医科大学临床大数据中心</span>
        </div>
    </div>
    <iframe src="teacherdata.html" frameborder="0" id="content2" class="show1"></iframe>
    <iframe src="studata.html" frameborder="0" id="content3" class="hide1"></iframe>
</div>
<script>
    var vm=new Vue({
        el:'#container2',
        data:{
            selectedfloor:2,
            totalnum:113284,//数据总条数
            imgurl:['../../images/bigdatascreen/2f.png','../../images/bigdatascreen/3f.png','../../images/bigdatascreen/4f.png','../../images/bigdatascreen/5f.png','../../images/bigdatascreen/6f.png'],
            imgurlactive:'../../images/bigdatascreen/2f.png',
            descriptionlist:[{name:'教学类数据', color:'#00B4F4'},{name:'训练类数据', color:'#20DB9A'},{name:'考试类数据', color:'#82DF1E'},{name:'评价类数据', color:'#EBB600'},{name:'管理类数据', color:'#F99E1C'},{name:'大赛类数据', color:'#F02FAA'}],
            //教学，训练，考试，评价，管理，大赛
        },
        mounted:function(){
            if($.cookie('totaldatanum')){//数据总条数
                this.totalnum=$.cookie('totaldatanum')
            }
            var pageurl=['teacherdata.html','studata.html']
            var showcontent=['#content2','#content3']
            var i=1
            var timer=setInterval(function(){
                $('#animateshadow').attr('src',"animation.html")
                setTimeout(function(){
                    if(i==1){
                        $(showcontent[1]).attr('class','show1')
                        $(showcontent[0]).attr('class','hide1')
                        i=0
                    }else{
                        $(showcontent[0]).attr('class','show1')
                        $(showcontent[1]).attr('class','hide1')
                        i=1
                    }
                },2220)
            },300000)
//            var mySwiper1 = new Swiper ('#floorimgswiper', {
//                onInit: function(swiper){ //Swiper2.x的初始化是onFirstInit
//                    swiperAnimateCache(swiper); //隐藏动画元素
//                    swiperAnimate(swiper); //初始化完成开始动画
//                },
//                onSlideChangeEnd: function(swiper){
//                    swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
//                }
//            })
            //this.initrotate()//楼层平面旋转
            this.initsnow()//冒泡
            this.changefloor()
        },
        methods:{
            initsnow:function(){//飘气泡函数
                var colorarr=['#00B7F1','#E3B300','#2CD294','#F09914','#84DF1E','#F533AE']
                var d="<div class='snow'><div>"
                var timer2=setInterval(function(){
                    var f=$('.u3dwindow').width();
                    var color=colorarr[parseInt(Math.random()*6)]
                    var e=(Math.random()*0.7+0.3)*f;
                    var o=0.8+Math.random();
                    var fon=20+Math.random()*30;
                    var l =(Math.random()*0.7+0.3)*f;
                    var k=5000 + 5000 * Math.random();
                    $(d).clone().appendTo(".u3dwindow").css({
                        left:e+"px",
                        opacity:o,
                        width:fon,
                        height:fon,
                        backgroundColor:color
                    }).animate({
                        top:"20%",
                        left:l+"px",
                        opacity:0.3,
                    },k,"linear",function(){
                        $(this).remove()
                        vm.totalnum++
                        $.cookie('totaldatanum', vm.totalnum, { expires: 7 })
                    })
                },1000)
            },
//            initrotate:function(){
//                var self=this
//                var timer3=setInterval(function(){
//                    var cloneelem=$('.ani:eq(0)').clone()
//                    $(cloneelem).children('img').attr('src',self.imgurl[self.selectedfloor-2])
//                    $('.ani:eq(0)').remove()
//                    $(cloneelem).appendTo('.rotatecontainer')
//                    self.selectedfloor++
//                    if(self.selectedfloor>6){
//                        self.selectedfloor=2
//                    }
//                },20000)
//            },
            changefloor:function(){
                var self=this
                var i=0
                var timer10=setInterval(function(){
                    i++
                    self.selectedfloor=i+2
                    if(i>4){
                        i=0
                        self.selectedfloor=2
                    }
                    self.imgurlactive=self.imgurl[i]
                },5000)
            }
        }
    })
</script>
</body>
</html>
