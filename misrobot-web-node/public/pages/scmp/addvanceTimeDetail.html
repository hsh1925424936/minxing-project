<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>开放训练时间详情</title>
    <script src="../../js/jquery-1.11.3.js"></script>
    <script src="../../layer/xie/layer1.js"></script>
    <script src="../../js/scmp/common.js"></script>
    <script src="../../js/vue.js"></script>
    <script src="../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <script src="../../js/scmp/jquery-ui.js"></script>
    <link rel="stylesheet" href="../../css/assistant/style.css">
    <link rel="stylesheet" href="../../bootstrap-3.3.5-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/scmp/scmpcommon.css">
    <style>
        body,html{
            height:auto;
        }
    </style>
</head>
<body>
    <div class="container-fluid" v-cloak>
        <div id="timeDetail">
            <table class="table f12 table-striped table-hover">
                <thead>
                <tr>
                    <th>序号</th>
                    <th>开放日</th>
                    <th>开放时间</th>
                    <th>开始-结束日期</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="(value,index) in timeDetail">
                    <td>{{ index+1 }}</td>
                    <td>{{ value.open_day| week }}</td>
                    <td>{{ value.open_start_dt }}~{{ value.open_end_dt }}</td>
                    <td>{{ value.start_dt | filterFn}}~{{ value.end_dt | filterFn}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        Vue.filter('week',function(value){//过滤训练项类型
            value=value.split(",");
            var newArr=[];
            for(index in value){
                value[index]==1 && newArr.push('周一');
                value[index]==2 && newArr.push('周二');
                value[index]==3 && newArr.push('周三');
                value[index]==4 && newArr.push('周四');
                value[index]==5 && newArr.push('周五');
                value[index]==6 && newArr.push('周六');
                value[index]==7 && newArr.push('周日')
            };
            return newArr.join(',')
        });
        var vm=new Vue({
            el:'.container-fluid',
            data:{
                placeid:window.location.href.split('=')[1],
                timeDetail:[]
            },
            filters:{
            	filterFn:function(val){
            		return val.substring(0,10)
            	}
            },
            methods:{},
        });
        getTimeDetail();
        function getTimeDetail(){//获取开放时间详情
            var data={
                command:'learn/queryplaceopentime',
                placeid:vm.placeid,
                sessionid:getCookie('sid'),
                loginid:getCookie('uid')
            };
            console.log(JSON.stringify(data));
            function callback(res){
            	console.log(res)
                vm.timeDetail=res.placeopentimes
            };
            post('/learn/queryplaceopentime',data,callback,errcodefn,errfn)
        }
    </script>
</body>
</html>