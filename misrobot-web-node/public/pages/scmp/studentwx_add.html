<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>外训学生增加</title>
		<link rel="stylesheet" href="../../bootstrap-3.3.5-dist/css/bootstrap.min.css" />
		<script src="../../js/jquery-1.11.3.js"></script>
	    <script src="../../layer/xie/layer1.js"></script>
	    <script src="../../js/scmp/common.js"></script>
	    <script src="../../js/laydate-v1.1/laydate/laydate.js"></script>
	    <script src="../../js/vue.js"></script>
	    <link rel="stylesheet" href="../../css/assistant/style.css">
	    <link rel="stylesheet" href="../../css/scmp/scmpcommon.css">
	    <link rel="stylesheet" href="../../css/scmp/newskill.css">
	    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
	    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-default/index.css">
	</head>
	<style>

	</style>
	<body>
<div id="add_student" v-cloak style="margin-top: 30px;">
	<div class="s_addStudent" style="z-index: 99999;">
		<div class="s_studentMessage">
			<ul>
				<li>
					<form class="form-horizontal">
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">* 姓名 ：</label>
								<div class="col-sm-4">
									<input class="form-control " type="text" v-model='name'>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">* 手机号 ：</label>
								<div class="col-sm-4">
									<input class="form-control" type="text" v-model='mobile'>
								</div>
							</div>
						</div>
					</form>
				</li>
				<li>
					<form class="form-horizontal">
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">* 邮箱 ：</label>
								<div class="col-sm-4">
									<input class="form-control" type="text" v-model="email">
								</div>
							</div>
						</div>	
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">职称 ：</label>
								<div class="col-sm-4">
									<select class="form-control input-sm" v-model='professional'>
										<option :value="value.id" v-for="value in titlelist">{{value.name}}</option>
									</select>
								</div>
							</div>
						</div>
						
					</form>
				</li>
				<li>
					<form class="form-horizontal">
					
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">医院等级 ：</label>
								<div class="col-sm-4">
									<select class="form-control input-sm" v-model='hospitallevel'>
										<option :value="value.id" v-for="value in hospitallist">{{value.name}}</option>
									</select>
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">学历 ：</label>
								<div class="col-sm-4">
									<select class="form-control input-sm" v-model='educational'>
										<option :value="value.id" v-for="value in educationlist">{{value.name}}</option>
									</select>
								</div>
							</div>
						</div>
					</form>
				</li>
				<li>
					<form class="form-horizontal">
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">工作单位 ：</label>
								<div class="col-sm-4">
									<input class="form-control " type="text" v-model="workunit">
								</div>
							</div>
						</div>
						<template>
						<div class="col-md-6">
							<div class="form-group form-group-sm">
								<label class="col-sm-4 control-label">出生年月：</label>
								<el-date-picker
							      v-model="birth"
							      type="date"
							      placeholder="选择日期"
							      :picker-options="pickerOptions1"
							      @change="dateChange">
							    </el-date-picker>
							</div>
						</div>
					</template>
					</form>
				</li>
			</ul>
		</div>
		<div style="clear:both;overflow:hidden;padding:25px 30px 0 0;text-align: center;" class="bt_add">
				<button class="btn btn-default" type="submit" v-on:click="cancel" style="float: left;margin-left: 45%;">取消</button>
				<button class="btn btn-primary" type="submit" v-on:click="save" style="float:left;margin-left: 20px;">保存</button>
		</div>
	</div>
</div>
<script>
  var vm=new Vue({
        el:"#add_student",
        data:{
			name:'',
			mobile:'',
			email:'',
			birth:'',
			professional:'',
			educational:'',
			workunit:'',
			hospitallevel:'',
			titlelist:[],
			hospitallist:[],
			educationlist:[],
			pickerOptions1:{},
        },
        mounted: function() {
			this.show_title();//显示职称
			this.show_hospital();//显示医院等级
			this.show_education();//显示学历
		},
        methods:{
        	dateChange(val){
        		this.birth=val;
        	},
			cancel:function(){
				var index = parent.layer.getFrameIndex(window.name);
				parent.layer.close(index)
			},
			save:function(){
				var self=this
				var data={
					command:'user/addwxstudent',
					sessionid:getCookie('sid'),
					loginid:getCookie('uid'),
					name:self.name,
					mobile:self.mobile,
					email:self.email,
					birth:self.birth,
					workunit:self.workunit,
					hospitallevel:self.hospitallevel,
					professional:self.professional,
					educational:self.educational,
				}
				function callback(res){
					layer.msg('成功新建一名外训学员信息');
					setTimeout(function(){
						layer.closeAll()
						window.parent.location.reload()
					},1000)
				}
				post('/user/addwxstudent',data,callback,errcodefn,errfn)
			},
			show_title(){
				var self=this
				var data={
					command:'hr/querylevellist',//接口地址
					sessionid:getCookie('sid'),
					loginid:getCookie('uid'),
					code:"title",
				};
				function callback(res){
					self.titlelist=res.levellist
				};
				post('/hr/querylevellist',data,callback,errcodefn,errfn)
			},
			show_hospital(){
				var self=this
				var data={
					command:'hr/querylevellist',//接口地址
					sessionid:getCookie('sid'),
					loginid:getCookie('uid'),
					code:"hospital",
				};
				function callback(res){
					self.hospitallist=res.levellist
				};
				post('/hr/querylevellist',data,callback,errcodefn,errfn)
			},
			show_education(){
				var self=this
				var data={
					command:'hr/querylevellist',//接口地址
					sessionid:getCookie('sid'),
					loginid:getCookie('uid'),
					code:"education",
				};
				function callback(res){
					self.educationlist=res.levellist
				};
				post('/hr/querylevellist',data,callback,errcodefn,errfn)
			},
		}
   });
</script>
	</body>
</html>
