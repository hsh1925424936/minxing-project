<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>调查模板</title>
    <link rel="stylesheet" href="../../css/element.css">
    <link rel="stylesheet" href="../../css/scmp/survey_question.css">
	<script src="../../js/vue.js"></script>
	<script src="../../js/element.js"></script>
	<script src="../../js/jquery-1.11.3.js"></script>
	<script src="../../layer/xie/layer1.js"></script>
	<script src="../../js/scmp/common.js"></script>
	<script src="../../js/echarts.min.js"></script>
	<script src="../../js/moment.js"></script>
    <!-- <script src="https://cdn.bootcss.com/jquery.qrcode/1.0/jquery.qrcode.min.js"></script> -->
</head>
<body>
     <div class="container" v-cloak style="margin:0;width:100%;">
        <p class="title">调查模板</p>
        <div class="marginBottom">
					<label>问卷名称</label>
					<el-input v-model='questionNameModel' class="input"></el-input>
					<label>状态</label>
					<el-select v-model="statusModel" placeholder="请选择" class="select">
						<el-option key="全部" value="" label="全部">全部</el-option>
						<el-option key="启用" value="0" label="启用">启用</el-option>
						<el-option key="停用" value="1" label="停用">停用</el-option>
					</el-select>
					<el-button type="primary" icon="search" @click="searchModel">搜索</el-button>
					<el-button type="primary" @click="addQuestionModel">新增问卷模板</el-button>
				</div>
				<div>
					<el-table ref="singleTable" :data="tempList" highlight-current-row border style="width: 100%">
						<el-table-column type="index" label="序号" width="85">
						</el-table-column>
						<el-table-column property="name" label="问卷名称" width="300">
						</el-table-column>
						<el-table-column property="status" label="状态" width='80'>
						</el-table-column>
						<el-table-column property="create_time" width="180" label="操作时间">
						</el-table-column>
						<el-table-column property="creator" label="操作人">
						</el-table-column>
						<el-table-column property="status" label="操作" width="300">
							<template scope="scope">
								<el-button type="text" size="small" @click.native.prevent="detailModel(scope.$index,scope.row)">查看</el-button>
								<el-button type="text" size="small" @click.native.prevent="edit(scope.$index,scope.row)">编辑问卷</el-button>
								<el-button v-if="scope.row.status == '停用'" type="text" size="small" @click.native.prevent="useModel(scope.$index,scope.row)">启用</el-button>
								<el-button v-if="scope.row.status == '启用'" type="text" size="small" @click.native.prevent="useModel(scope.$index,scope.row)">停用</el-button>
								<el-button v-if="scope.row.status == '停用'" type="text" size="small" @click.native.prevent="deleteModel(scope.$index,scope.row,2)">删除</el-button>
							</template>

						</el-table-column>
					</el-table>
					<div class="flex-end marginTop">
						<el-pagination
							@size-change="handleSizeChange"
							@current-change="handleCurrentChange"
							:current-page="currentPage"
							:page-sizes="[10, 20, 50, 100]"
							:page-size="pageSize"
							layout="total, sizes, prev, pager, next, jumper"
							:total="modelNum">
						</el-pagination>
					</div>
                </div>
                <el-dialog title="选择创建方式" :visible.sync="dialogVisibleAddModel" size="small" :before-close="handleCloseAddModel">
                    <el-button type='text' @click="selectQuestionModel">选择问卷模板</el-button>
                    <el-button type='text' @click="addQuestionServise">录入问卷服务</el-button>
				</el-dialog>
				   	<!--选择模板  -->
		<el-dialog
			title="选择模板"
			:visible.sync="dialogVisibleSelectModel"
			size="small"
			:before-close="handleCloseSelectModel">
			<div>
				<el-input v-model="searchTempName" placeholder="请输入问卷名称" class="marginBottom">
					<el-button slot="append" icon="search" @click="searchTemp"></el-button>
				</el-input>
				 <el-table
					ref="multipleTable"
					:data="selectModelList"
					border
					tooltip-effect="dark"
					style="width: 100%"
					highlight-current-row
					@current-change="handleSelectionChange">
				 	<el-table-column
					type="index"
					width="65"
					label="序号">
					</el-table-column>
					<el-table-column
					prop="name"
					label="问卷名称"
					>
					</el-table-column>
					<el-table-column
					prop="creator"
					label="操作人"
					width="120">
					</el-table-column>
				</el-table>
				<div class="flex-end marginTop">
						<el-pagination
							@size-change="handleSizeChangeModel"
							@current-change="handleCurrentChangeModel"
							:current-page="currentPageModel"
							:page-sizes="[10, 20, 50, 100]"
							:page-size="pageSizeModel"
							layout="total, sizes, prev, pager, next, jumper"
							:total="selectModelNum">
						</el-pagination>
				</div>

			</div>
			 <span slot="footer" class="dialog-footer">
				<el-button @click="dialogVisibleSelectModel = false">取 消</el-button>
				<el-button type="primary" @click="selectModelSure">确 定</el-button>
			</span> 
		</el-dialog>
                 	<!--新增编辑问卷-->
		<el-dialog :title="is_edit?'编辑问卷':'新增问卷'" :visible.sync="dialogVisibleAddQuestion" size="full" :before-close="handleCloseAddQuestion">
				<div class="editQuestionDialog">
					<div class="flex-between">
						<h2 class="middleFontSize" style="width:100px;"><span style="color:red;">*</span>问卷标题：</h2>
						<el-input placeholder="请输入问卷名称" v-model="naire.name" class="marginBottom"></el-input>
					</div>
					<div class="flex-between">
						<h2 class="middleFontSize" style="width:100px;"><span style="color:red;">*</span>问卷说明：</h2>
						<el-input placeholder="请输入问卷说明" v-model="naire.comment" type="textarea" :rows="3"></el-input>
					</div>
					<!--增加题目-->
					<div v-for="(item,index) in evaluationList" class="marginTop border padding">
						<div class="flex-between marginBottom">
							<span>{{index+1}}、</span>
							<el-input placeholder="在此输入题目标题" v-model="item.content"></el-input>
							<span v-if="item.type == 1" class="naireType">（单选题）</span>
							<span v-else-if="item.type == 2" class="naireType">（多选题）</span>
							<span v-else-if="item.type == 3" class="naireType">（简答题）</span>
							<!-- <span v-else class="naireType">（段落说明）</span> -->
							<p class="flex-between" style="margin-bottom:0;margin-left:20px;width:20%;height:40px;">
								<span>是否必填</span>
								<el-radio class="radio" v-model="item.required" label="0">是</el-radio>
								<el-radio class="radio" v-model="item.required" label="1">否</el-radio>
							</p>
						</div>
						<div>
							<p v-for="(v,key) in item.items" v-if="item.type == 1 || item.type == 2" class="flex-between paddingLeft">
								<span class="marginRight">{{String.fromCharCode(key+65)}}</span>
								<el-input placeholder="输入选项内容，100字以内" v-model="v.content"></el-input>
								<el-button class="marginLeft" type="primary" v-if="key == 0" @click="addNaireNum(index)"><i class="el-icon-plus"></i></el-button>
								<el-button class="marginLeft" type="primary" v-else @click="deleteNaireNum(index,key)" icon="delete"></el-button>
							</p>
							<p v-if="item.type == 3 || item.type == 4" class="paddingLeft">
								<el-input type="textarea" :rows="4" v-model="item.content" disabled></el-input>
							</p>
							<p class="flex-end">
								<el-button type="primary" disabled v-if="index == 0">上移</el-button>
								<el-button type="primary" @click="moveTop(index)" v-else>上移</el-button>
								<el-button type="primary" disabled v-if="index == evaluationList.length - 1">下移</el-button>
								<el-button type="primary" @click="moveBottom(index)" v-else>下移</el-button>
								<el-button type="primary" @click="deleteAddNaire(index)">删除</el-button>
							</p>
						</div>
					</div>
					<span class="footerCenter">
						<el-button type="primary" @click="dialogVisibleAddSubject = true">增加题目</el-button>
						<el-button @click="saveAddNaireModel">保存</el-button>
					</span>
				</div>
        </el-dialog>
            	<!--选择题型：单选，多选，简答，段落说明-->
		<el-dialog title="选择类型" :visible.sync="dialogVisibleAddSubject" size="tiny" :before-close="handleCloseAddSubject">
			<el-select v-model="subjectType" placeholder="请选择" style="margin-left:50px;">
				<el-option label="单选题" value="1" key="1"></el-option>
				<el-option label="多选题" value="2" key="2"></el-option>
				<el-option label="简答题" value="3" key="3"></el-option>
				<!-- <el-option label="段落说明" value="4" key="4"></el-option> -->
			</el-select>
			<span slot="footer" class="dialog-footer">
				<el-button type="primary" @click="dialogVisibleAddSubjectClick">确 定</el-button>
				<el-button @click="dialogVisibleAddSubject = false">取 消</el-button>			
			</span>
        </el-dialog>
          <!--查看问卷详情  -->
        <el-dialog title="查看问卷" :visible.sync="dialogVisibleQuestionDetail" size="full"                                 :before-close="handleCloseQuestionDetail">
			<div class="detail">
				<div id="code"></div>
				<h1>{{naire.name}}</h1>
				<p class="instruction">{{naire.comment}}</p>
				<div class="question" v-for="(item,index) in evaluationList">
					<h2><span v-if="item.required == 0" style="color:red;">*</span>{{index+1}}、{{item.content}}
						<span v-if="item.type == 1">(单选题)</span><span v-if="item.type == 2">(多选题)</span></h2>
					<div class="flex">
						<p v-if="item.type == 1" v-for="(v,key) in item.items" class="selectCont">
							<el-radio class="radio" disabled><span v-if="v.code">{{v.code}}、</span>{{v.content}}</el-radio>
						</p>
						<p v-if="item.type == 2" v-for="(v,key) in item.items" class="selectCont">
							<el-checkbox disabled>{{key+1}}、{{v.content}}</el-checkbox>
						</p>
						<p v-if="item.type == 3" v-for="(v,key) in item.items" class="selectCont textarea">
							<el-input type="textarea" :rows="4" placeholder="200字以内" disabled>
							</el-input>
						</p>
					</div>
				</div>
			</div>
        </el-dialog>
     </div>
    <script>
        var vm = new Vue({
            el:'.container',
            data:{
                questionNameModel:'',//搜索模板
                statusModel:"",//状态
				pageSize:10,
				currentPage:1,
                currentPageModel:1,
                pageSizeModel:10,
				modelNum:0,
				selectModelNum:0,
                tempList:[],//所有模板列表数据
				searchTempName:"",//搜索模板条件
				selectModelList:[],
				selectModelId:'',
                dialogVisibleAddModel:false,//
                dialogVisibleAddQuestion:false,//新增模板
                dialogVisibleAddSubject:false,//选择题型
                dialogVisibleSelectModel:false,
                subjectType:'1',
                evaluationList:[],//新增模板数据
                is_edit:false,//是否为编辑
                naire:{
                    name:'',
                    comment:'',
                },
                deleteArr:[],
                deleteItemsList:[],
                naire_id:"",//试卷id
                dialogVisibleQuestionDetail:false,//查看详情
                deleteevaluationList:[],
                useModelStatus:'',//启用停用提示信息
            },
            mounted(){
                this.queryTempList(this.currentPage,this.pageSize)
            },
            methods:{
                handleCloseAddModel(){
                    this.dialogVisibleAddModel = false
                },
                handleCloseAddQuestion(){
                    this.dialogVisibleAddQuestion = false
                },
                handleCloseAddSubject(){
                    this.dialogVisibleAddSubject = false
                },
                handleCloseQuestionDetail(){
                    this.dialogVisibleQuestionDetail = false
				},
				handleCloseSelectModel(){
					this.dialogVisibleSelectModel = false
				},
				handleSizeChangeModel(val){
                    this.pageSizeModel = val
					this.queryTempListModel(this.currentPageModel,this.pageSizeModel)
                },
                handleCurrentChangeModel(val){
                    this.currentPageModel = val
					this.queryTempListModel(this.currentPageModel,this.pageSizeModel)
                },
                handleSizeChange(val){
                    this.pageSize = val
					this.queryTempList(this.currentPage,this.pageSize)
                },
                handleCurrentChange(val){
                    this.currentPage = val
					this.queryTempList(this.currentPage,this.pageSize)
                },
                // 搜索
                searchModel(){
					this.queryTempList(this.currentPage,this.pageSize)
                },
                // 新增
                addQuestionModel() {
					this.dialogVisibleAddModel = true
                },
				// 点击选择模板
                selectQuestionModel(){
					this.dialogVisibleAddModel = false
                    this.dialogVisibleSelectModel = true
                    this.queryTempListModel(this.currentPageModel,this.pageSizeModel)
				},
				// 调查记录中的选择模板
				handleSelectionChange(val){
					// console.log(val)
					if(val){
						this.selectModelId = val.naire_id
					}	
				},
				//选择模板中搜索模板
				searchTemp(){
					this.queryTempListModel(this.currentPageModel,this.pageSizeModel)
				},
				// 调查记录中选择模板点击确定
				selectModelSure(){
					this.is_edit = false
					this.dialogVisibleSelectModel = false
					this.deleteArr = []
					this.deleteItemsId = []
					this.deleteItemsList = []
					this.queryNaireInfo(this.selectModelId)
					this.dialogVisibleAddQuestion = true
				},
                //录入问卷模板服务 
                addQuestionServise(){
                    this.evaluationList = []
                    this.deleteArr = []
                    this.deleteItemsList = []
					this.naire.name = ''
					this.naire.comment = ''
                    this.naire_id = ''
                    this.is_edit = false
                    this.dialogVisibleAddModel = false
                    this.dialogVisibleAddQuestion = true
				},
				// 选择模板
				queryTempListModel(page,size){
					let self =this
					// this.selectModelList = []
					// this.selectModelNum = 0
					let data = {
						command: 'commonNaire/queryTempList',//接口地址
						sessionid: getCookie('sid'),
						loginid: getCookie('uid'),
						name: self.searchTempName,
						status:'0',
						category:'Naire',
						page:page,
						reqnum:size
					};
					function callback(res) {
						if(res && res.errcode == 0){
							self.selectModelList = res.temp_list
							self.selectModelNum = res.count
						}
					};
					post('/commonNaire/queryTempList', data, callback, errcodefn, errfn)
                },
                // 调查模板列表
				queryTempList(page,size){
					let self =this
					this.tempList = []
					this.selectModelList = []
					this.selectModelNum = 0
					let data = {
						command: 'commonNaire/queryTempList',//接口地址
						sessionid: getCookie('sid'),
						loginid: getCookie('uid'),
						name: self.questionNameModel,
						status:self.statusModel,
						category:'Naire',
						page:page,
						reqnum:size
					};
					function callback(res) {
						if(res && res.errcode == 0){
							self.tempList = res.temp_list
							self.modelNum = res.count
							self.tempList.map(function(item,index,arr){
								if(item.status == 0) {
									item.status = '启用'
								} else if (item.status == 1) {
									item.status = '停用'
								}
							})
						}
						
					};
					post('/commonNaire/queryTempList', data, callback, errcodefn, errfn)
                },
                // 新增或编辑问卷添加题型的事件
				dialogVisibleAddSubjectClick() {
					let self = this
					this.dialogVisibleAddSubject = false
					if(self.subjectType == 1 || self.subjectType == 2){
							this.evaluationList.push({
								order:self.evaluationList.length + 1,
								code:'',
								required:'0',
								type:self.subjectType,
								content:'',
								status:0,
								items:[
									{order:1,code:'',content:'',status:0},
									{order:2,code:'',content:'',status:0},
									{order:3,code:'',content:'',status:0},
									{order:4,code:'',content:'',status:0}
								]
							})
					}else if(self.subjectType == 3 || self.subjectType == 4){
							// this.order = this.evaluationList.length + 1
							this.evaluationList.push({
								order:self.evaluationList.length + 1,
								code:'',
								required:'0',
								type:self.subjectType,
								content:'',
								status:0,
							})
					}
				},
                // 新增或编辑问卷新增题目选项
				addNaireNum(index){
					let length = this.evaluationList[index].items.length
					this.evaluationList[index].items.push({order:length+1,code:'',content:'',status:0})
				},
				// 新增或编辑问卷删除选项
				deleteNaireNum(index,key){
						if(this.evaluationList[index].items[key].id){
							this.evaluationList[index].items[key].status = 1
							this.deleteItemsId.push(this.evaluationList[index].items[key].id)
							var deleteItems = this.evaluationList[index].items.splice(key,1)
							deleteItems[0].status = 1
							this.deleteItemsList.push({
								index:index,
								item:deleteItems
							})
						}else{
							this.evaluationList[index].items.splice(key,1)
							this.evaluationList[index].items.map(function(item,index1,arr){
								if(index1>=key){
									item.order -= 1
								}
							})
						}
				},
				// 新增或编辑问卷中上移题目
				moveTop(index){
					// let self = this
					let prevOrder,currentOrder;
						prevOrder = this.evaluationList[index-1].order
						currentOrder = this.evaluationList[index].order
						this.evaluationList[index].order = prevOrder
						this.evaluationList[index-1].order = currentOrder
						this.evaluationList.sort(this.sort)
                        // console.log(this.evaluationList)
				},
				// 新增或编辑问卷中下移题目
				moveBottom(index){
					// let self = this
					let nextOrder,currentOrder;
						currentOrder = this.evaluationList[index].order
						nextOrder = this.evaluationList[index+1].order
						this.evaluationList[index].order = nextOrder
						this.evaluationList[index+1].order = currentOrder
						this.evaluationList.sort(this.sort)
                        // console.log(this.evaluationList)
				},
				// sort方法正序
				sort(a,b){
					return a.order - b.order
				},
				// 删除题目
				deleteAddNaire(index){
                    console.log(this.evaluationList)
					this.$confirm('此操作将永久删除该题目, 是否继续?', '提示', {
						confirmButtonText: '确定',
						cancelButtonText: '取消',
						type: 'warning'
					}).then(() => {
                        if(this.evaluationList[index].id){
                            this.evaluationList[index].status = 1
                            this.deleteArr.push(this.evaluationList[index])
                            this.evaluationList.splice(index,1)
                        }else{
                            this.evaluationList.splice(index,1)
                        }
						this.$message({
							type: 'success',
							message: '删除成功!'
						});
                        // console.log(this.evaluationList)
					}).catch(() => {
						this.$message({
							type: 'info',
							message: '已取消删除'
						});
					});
				},
                // 将时间戳转换成相应的日期
				getLocalTime(nS) {
					return new Date(parseInt(nS) * 1000).toLocaleString().substr(0, 17)
				},
                getCommand(url){
					return url.substr(1)
				},
                // 新增或编辑问卷点击保存按钮
				saveAddNaireModel(){
					let self = this
					let question_list = []
					let required = []
                    let url = ''
                    this.dialogVisibleAddModel = false
                    // console.log(this.evaluationList)
                    // 编辑
                    if(this.is_edit){
                        url = '/commonNaire/modifyNaireInfo'
                        // 新增
                    }else{
                        url = '/commonNaire/addNaireTemp'
                    }
                    
					this.evaluationList.map(function(item,index,arr){
								if(item.title == ""){
									required.push(index+1)
								}
								if(item.type == 1 || item.type == 2){
									item.items.map(function(item1,index1,arr1){
										if(!item1.content){
											required.push(index+1)
										}
									})
								}
								question_list.push(item)
                    })
                    this.deleteArr.map(function(item,index,arr){
								question_list.push(item)
						})
					this.deleteItemsList.map((item,index,arr)=>{
							question_list[item.index].items.push(item.item[0])
					    })
					// console.log(question_list)
					// console.log(required)
					// 判断是不是有空的题目存在
					if(required.length){
						this.$message({
							type: 'warning',
							message: '还有第'+self.unique(required).join(',')+'道题目没有填完'
						});
					}else{
							if(self.naire.name == ""){
								this.$message({
									type:'warning',
									message:'请填写问卷标题！'
								})
							}else if(self.naire.comment == ""){
								this.$message({
									type:'warning',
									message:'请填写问卷说明！'
								})
							}else if(question_list.length == 0){
                                this.$message({
                                    type:'warning',
                                    message:'请至少创建一个题目！'
                                })
                            }else{
								let data = {
										command: self.getCommand(url),
										sessionid: getCookie('sid'),
										loginid: getCookie('uid'),
										name: self.naire.name,
										title:self.naire.name,
										comment:self.naire.comment,
										type:0,
										question_list:question_list,
										category:'Naire',
                                        naire_id:self.naire_id,
									};
								function callback(res) {
									if(res.errcode == 0){
                                        self.queryTempList(self.currentPage,self.pageSize)
										self.dialogVisibleAddQuestion = false
                                        if(self.is_edit){
                                            self.$message({
                                                type:'success',
                                                message:'修改成功了！'
                                            })
                                        }else{
                                            self.$message({
                                                type:'success',
                                                message:'新增成功！'
                                            })
                                        }
									}else{
										self.$message({
											type:'error',
											message:res.errdesc
										})
									}
								};
								post(url, data, callback, errcodefn, errfn)
								}
						}	
				},
				// 数组去重
				unique(arr) {
					var res = [];
					var json = {};
					for (var i = 0; i < arr.length; i++) {
						if (!json[arr[i]]) {
							res.push(arr[i]);
							json[arr[i]] = 1;
						}
					}
					return res;
                },
				// 查看详情
                detailModel(index,row){
                    this.queryNaireInfo(row.naire_id)
					this.dialogVisibleQuestionDetail = true
                },
                // 调查模板中查看问卷列表详情
                queryNaireInfo(id) {
                    let self = this
                    this.evaluationList = []
                    this.naire.name = ''
                    this.naire.comment = ''
                    let data = {
                        command: 'commonNaire/queryNaireInfo',//接口地址
                        sessionid: getCookie('sid'),
                        loginid: getCookie('uid'),
                        naire_id: id
                    };
                    function callback(res) {
                        if (res.naire_info) {
                            // self.name = res.naire_info.title
                            // self.instruction = res.naire_info.comment
                            self.naire.name = res.naire_info.title
                            self.naire.comment = res.naire_info.comment
                            self.evaluationList = res.naire_info.items
                            self.evaluationList.map(function (item, index, arr) {
                                self.deleteevaluationList.push(item)
                            })
                            self.evaluationList.map(function (item, index, arr) {
                                item.required = item.required + ''
                            })
                        }
                    };
                    post('/commonNaire/queryNaireInfo', data, callback, errcodefn, errfn)
                },
                // 启用停用
				useModel(index,row){
                    let url = '';
                    let activity_id,naire_id;
					if(row.status == '启用'){
                        this.useModelStatus = '停用'
                        url='/commonNaire/stopNaireTemp'
                        activity_id = row.activity_id
                        naire_id = row.naire_id
					}else if(row.status == '停用'){
                        this.useModelStatus = '启用'
                        url = '/commonNaire/startNaireTemp'
                        activity_id = row.activity_id
                        naire_id = row.naire_id
                    }
                    this.changeNaireStatus(url,activity_id,naire_id)
                },
                changeNaireStatus(url,activity_id,naire_id){
                    let self = this
                    let data = {
						command: self.getCommand(url),
						sessionid: getCookie('sid'),
						loginid: getCookie('uid'),
						activity_id:activity_id,
						naire_id:naire_id,
                    }
                    function callback(res) {
                        if(res && res.errcode == 0){
                            self.queryTempList(self.currentPage,self.pageSize)
                            self.$message({
                                type:'success',
                                message:self.useModelStatus+'成功了！'
                            })
                        }
                    }
                    post(url, data, callback, errcodefn, errfn)
                },
                // 记录和模板中的删除
				deleteModel(index,row){
					let self  = this
					this.$confirm('此操作将永久删除该问卷, 是否继续?', '提示', {
						confirmButtonText: '确定',
						cancelButtonText: '取消',
						type: 'warning'
					}).then(() => {
						this.deleteNaireTemp(row.activity_id,row.naire_id)
					}).catch(() => {
						this.$message({
							type: 'info',
							message: '已取消删除'
						});
					});
                },
                deleteNaireTemp(activity_id,naire_id){
                    let self = this
                    let data = {
						command:'commonNaire/deleteNaireTemp',
						sessionid: getCookie('sid'),
						loginid: getCookie('uid'),
						activity_id:activity_id,
						naire_id:naire_id,
					};
					function callback(res) {
                        if(res && res.errcode == 0){
                            self.queryTempList(self.currentPage,self.pageSize)
                            self.$message({
                                type:'success',
                                message:'删除成功了！'
                            })
                        }else{
                            self.$message.error(res.errdesc)
                        }
					};
					post('/commonNaire/deleteNaireTemp', data, callback, errcodefn, errfn)
                },
				// 编辑
				edit(index,row){
					this.naire_id = row.naire_id
                    this.deleteArr = []
                    this.deleteItemsId = []
                    this.deleteItemsList = []
                    this.queryNaireInfo(row.naire_id)
                    this.is_edit = true
                    this.dialogVisibleAddQuestion = true
				},
            }
        })
    </script>
</body>
</html>