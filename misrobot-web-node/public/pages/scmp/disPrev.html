<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<meta name="keywords"content=""> 
	<meta name="description"content=""> 
    <title>疾病预防</title>
	 <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link rel="stylesheet" href="/bootstrap-3.3.5-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../../css/scmp/disPrev.css" />
    <link rel="stylesheet" href="/css/scmp/animate.min.css" />
   	
	
	
	
    <style type="text/css">
    	[v-cloak] {
				display:none
			}
        #priv img{width:100%;}
    </style>
</head>

<body id="main" class="main">
	<div id="con" v-cloak>
		<div class="contdeail" >
			<p class="lanmu">疾病预防</p>
		
			<!--搜索开始-->
			<div class="prod-header">
				<div class="search clearfix">
					<input placeholder="请输入关键字" v-model="title" class="search-txt" @keyup.enter="searchdisPrev" />
					<span class="search-btn glyphicon glyphicon-search" @click="searchdisPrev"></span>
					<a data-toggle="modal" data-target="#addModal" class="addprodouct" @click="addCk">新增&nbsp;&nbsp;+</a>
				</div>
			</div>
			
			
			<!--搜索结束-->
			<div class="wraper">
				<div class="proType">
					<div id="perDept" class="perDept clearfix">
						<a href="javascript:void(0)" :class="{on:typeBtn1}" @click="upBtn1()">按人群分</a>
						<a href="javascript:void(0)" :class="{on:typeBtn2}" @click="upBtn2()">按科室分</a>
					</div>
					<ul id="productType" class="clearfix" v-show="typeBtn1">
						<li>
							<a href="javascript:void(0)" @click="getTypeId1(-1)" :class="{on:personType==-1}">全部</a>
						</li>
						<li v-for="item in personList">
							<a href="javascript:void(0)"  @click="getTypeId1(item.id)" :class="{on:item.id==personType}">{{item.name}}</a>
						</li>
						
					</ul>
					<ul id="productType2" class="clearfix" v-show="typeBtn2">
						<li>
							<a href="javascript:void(0)" @click="getTypeId2(-1)" :class="{on:deptType==-1}">全部</a>
						</li>
						<li v-for="item in deptList">
							<a href="javascript:void(0)"  @click="getTypeId2(item.id)" :class="{on:item.id==deptType}">{{item.name}}</a>
						</li>
					</ul>
				</div>
				
				<div class="prodouct-list">
					<table class="table" cellpadding="50">
						<tr v-for="item in list">
							<td class="photo" cellpadding="50">
								<a href="javascript:void(0)" class="ac-photo">
									<img :src="item.imgurl" width="140" height="90" />
									
								</a>
							</td>
							<td class="prodouct-txt">
								<div class="pro-ti-ty-wrap clearfix" ><h3 class="prodouct-title">{{item.disease_title}}</h3><span class="healthType">{{item | typeName}}</span></div>
								<p class="prodouct-sumary" v-html="item.disease_desc"></p>
							</td>
							<td class="update-time" cellpadding="50">
								<span class="title-span">最新修改时间</span>
								<span>{{item.disease_updatetime}}</span>
							</td>
							<td class="update-person"cellpadding="50">
								<span class="title-span">最新修改人</span>
								<span>{{item.disease_uname}}</span>
							</td>
							<td class="prodouct-btn" cellpadding="50">
								<span class="title-span">操作</span>
								<!--<input class="btn btn-primary btn-sm" type="button" :value="item.health_recommended==0?'推荐':'取消推荐'" data-toggle="modal" data-target="#previewModal" id="aaa" @click="recommend(item)" />-->
								<input class="btn btn-primary btn-sm" type="button" value="编辑" data-toggle="modal" data-target="#upModal" @click="getCurrQr(item.disease_id)" />
								<input class="btn btn-primary btn-sm" type="button" value="删除" data-toggle="modal" data-target="#delModal" @click="disease_id=item.disease_id" />
							</td>
						</tr>
					
						
					</table>
				
					<!--分页开始-->
					<nav aria-label="..." class="page-right">
						<ul class="pagination">
							
							<li @click="upPage(1)"><span>首页</span></li>
							<li @click="upPage(page-1)"><span aria-hidden="true" >上一页</span></li>
							<li v-for="item in pageDis" :class="{active : item==page}" @click="upPage(item)"><span>{{item}}</span></li>
							
							<li @click="upPage(page+1)"><span aria-hidden="true" >下一页</span></li>
							<li @click="upPage(pages)"><span>尾页</span></li>
						</ul>
					</nav>
					
					<!--分页结束-->
				</div>
			</div>
		</div>
		
		<!--新增开始-->
		<div class="modal fade model-lg" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
			<div class="modal-dialog " role="document">
				<div class="modal-content">
					<form class="form-inline">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel" >新增</h4>
						</div>
						<div class="modal-body">
							
							<div class="form-group proClass">
								<label>按人群分类：</label>
								<select class="form-control" v-model="person_type_add">
									<option :value="-2">请选择分类</option>
									<option v-for="item in personList" :value="item.id">{{item.name}}</option>
								</select>
							</div>
							<div class="form-group proClass">
								<label>按科室分类：</label>
								<select class="form-control" v-model="dept_type_add">
									<option :value="-2">请选择分类</option>
									<option v-for="item in deptList" :value="item.id">{{item.name}}</option>
								</select>
							</div>
							<div class="prodouct-add-title form-group">
								<label>标题：</label>
								<input class="form-control" v-model="titleAdd"/>
								
							</div>
							
							<div class="prodouct-img form-group" style="display:block;">
								<label>缩略图：</label><input type="file" name="file" class="inline-inp" id="addFile" @change="uploadImg($event)" />
							</div>
							
							
							
							
							<div id="editorwap">
								<textArea id="editor" name="editor">
					
								</textArea>
							</div>
						    
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
							<button type="button" class="btn btn-primary" id="addh5" @click="addDeptPrev()">保存</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<!--新增结束-->
		<!--修改开始-->
		<div class="modal fade model-lg" id="upModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
			<div class="modal-dialog " role="document">
				<div class="modal-content">
					<form class="form-inline">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel" >修改</h4>
						</div>
						<div class="modal-body">
							
							<div class="form-group proClass">
								<label>按人群分类：</label>
								<select class="form-control" v-model="disease_person_type_up">
									
									<option v-for="item in personList" :value="item.id" v-if="item.id==detail.disease_person_type">{{item.name}}</option>
									<option v-for="item in personList" :value="item.id" v-if="item.id!=detail.disease_person_type">{{item.name}}</option>
								</select>
							</div>
							<div class="form-group proClass">
								<label>按科室分类：</label>
								<select class="form-control" v-model="disease_person_type_up">
									
									<option v-for="item in deptList" :value="item.id" v-if="item.id==detail.disease_dept_type">{{item.name}}</option>
									<option v-for="item in deptList" :value="item.id" v-if="item.id!=detail.disease_dept_type">{{item.name}}</option>
								</select>
							</div>
							<div class="prodouct-add-title form-group">
								<label>标题：</label>
								<input class="form-control" v-model="detail.disease_title"/>
								
							</div>
							
							<div class="prodouct-img form-group" style="display:block">
								<label>缩略图：</label><input type="file" class="inline-inp" id="upFile" @change="uploadImg($event)"/>
							</div>
							
							<!--
							<div class="prodouct-img form-group">
								<label>摘要：</label>
								<textarea class="prouct-summary" v-model="detail.qrcode_desc"></textarea>
								<p v-show="sheyu2<sulen-1" v-if="sheyu2>0" class="numberString">还可以输入{{sheyu2}}个字</p>
								<p v-show="sheyu2==0" class="numberString">您输入的字数到达了{{sulen}}个字，不能再输入了</p>
							</div>
							-->
							
							<div id="editorwap2">
								<textArea id="editor2" name="editor2">
					
								</textArea>
							</div>
						    
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
							<button type="button" class="btn btn-primary" id="addh5" @click="updateDept()">保存</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<!--修改结束结束-->
		<!--删除确认框开始-->
		<div class="modal fade" id="delModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static">
			<div class="modal-dialog modal-xs modal-400" style="width:400px" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="myModalLabel" >删除</h4>
					</div>
					<div class="modal-body">
						
						确定要删除吗？
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
						<button type="button" class="btn btn-primary" @click="deleteDept">确定</button>
					</div>
				</div>
			</div>
		</div>
		<!--删除确认框结束-->
		<!--其他弹框开始-->
		<div class="modal fade online-modal" tabindex="-1" role="dialog" id="otherModal" data-backdrop="static">
			<div class="modal-dialog modal-sm modal-400" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="otherModal-title">温馨提示</h4>
					</div>
					<div class="modal-body">
						<p id="otherModal-con"></p>
					</div>
					<div class="modal-footer border-0">
						
						<button type="button" class="btn btn-primary btn-100"  data-dismiss="modal" >关闭</button>
					</div>
				</div>
			</div>
		</div>
		<!--其他弹框结束-->
	
	<!--进度条-->
		<div class="upPross"><div class="upPro"></div></div>
	
		
	
	
	</div>
	
	
	<script src="../ckeditor/ckeditor.js"></script>
	<!--<script src="../ckeditor/samples/js/sample.js"></script>-->
	<!--<script src="../ckeditor/samples/js/sample2.js"></script>-->
	
	
    <script type="text/javascript" src="/js/jquery-1.11.3.js" ></script>
    <script src="/js/jquery.cookie.js"></script>
    <script src="/js/vue.js"></script>
    <script type="text/javascript" src="/bootstrap-3.3.5-dist/js/bootstrap.min.js" ></script>
	<script src="/js/scmp/disPrev.js" ></script>
	<script type="text/javascript">
	/*解决在bootstrap modal 中ckeditor 弹框不能输入的问题*/
	$.fn.modal.Constructor.prototype.enforceFocus = function () {
	    var $modalElement = this.$element;
	    $(document).on('focusin.modal', function (e) {
	        var $parent = $(e.target.parentNode);
	        if ($modalElement[0] !== e.target && !$modalElement.has(e.target).length
	            // add whatever conditions you need here:
	            &&
	            !$parent.hasClass('cke_dialog_ui_input_select') && !$parent.hasClass('cke_dialog_ui_input_text')) {
	            $modalElement.focus()
	        }
	    })
	};
	  //initSample();
	  //initSample2();
	 CKEDITOR.replace("editor");
	 CKEDITOR.replace("editor2");
	
	
	</script>
	
</body>
</html>