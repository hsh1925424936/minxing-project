<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录技能中心管理平台</title>
    <script src="../../js/jquery-1.11.3.js"></script>
    <script src="../../layer/xie/layer1.js"></script>
    <script src="../../js/scmp/common.js"></script>
    <script src="../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../../bootstrap-3.3.5-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/scmp/scmpcommon.css">
    <style>
        body,html{
            height:100%;
        }
       #container{
            height:100%;
            background-color: #edf1ff;
        }
        #header>h1{
            color:white;
            text-align: center;
            font-size:36px;
            margin:0;
            padding-top:88px;
            font-family: FZZZHUNHJW--GB1-0;
        }
        #header{
            height:248px;
            background-color: #2088c2;
        }
        #content{
            background-color: white;
            width:460px;
            margin:0 auto;
            height:320px;
            border-radius: 5px;
            position: relative;
            top:38px;
            padding:40px 50px 0 50px;
        }
        #content>p i{
            width:18px;
            height:22px;
            position:absolute;
            top:13px;
            left:10px;
            background-repeat: no-repeat;
        }
        #content>p{
            position:relative;
            height:48px;
        }
        p.uname>i{
            background-image: url("../../images/scmp/zhanghao.png");
        }
        p.pwd>i{
            background-image: url("../../images/scmp/mima.png");
        }
        input{
            padding-left:40px;
            display:block;
            width:100%;
            height:100%;
        }
        p.login{
            text-align: center;
            border-radius: 5px;
            background-color: #2088c2;
            font-size:18px;
            color:white;
            line-height:48px;
            cursor: pointer;
        }
        .mulno{
            width:18px;
            height:18px;
            float:left;
            background-image:url("../../images/scmp/mimak.png")
        }
        .mulyes{
            background-image:url("../../images/scmp/mimak-h.png")
        }
        p.uname{
            margin-bottom:20px;
        }
        p.pwd{
            margin-bottom:12px;
        }
        p.savePwd{
            margin:0
        }
        p.savePwd>span{
            padding-left: 5px;
        }
        p.forget{
            text-align: center;
            color:#a8a8a8;
        }
        p.forget>span{
            border-bottom: 1px solid #a8a8a8;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="header">
            <h1>技能中心管理平台</h1>
            <div id="content">
                <p class="uname">
                    <i></i>
                    <input id="uname" type="text" placeholder="请输入用户名" onfocus="changeIcon(this,'uname','focus')" onblur="changeIcon(this,'uname','blur')">
                </p>
                <p class="pwd">
                    <i></i>
                    <input id="pwd" type="password" placeholder="请输入密码" onfocus="changeIcon(this,'pwd','focus')" onblur="changeIcon(this,'pwd','blur')">
                </p>
                <p class="savePwd">
                    <b class="mulno" onclick="toggleChoose(this)"></b>
                    <span>记住密码</span>
                </p>
                <p class="login" onclick="login()">登 录</p>
                <p class="forget hide"><span>忘记密码?</span></p>
            </div>
        </div>
    </div>
    <script>
        (function(){
            var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串
//            var isOpera = userAgent.indexOf("Opera") > -1; //判断是否Opera浏览器
//            var isIE = userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1 && !isOpera; //判断是否IE浏览器不支持IE11
            var isIE = window.ActiveXObject || "ActiveXObject" in window //判断是否IE浏览器
//            var isEdge = userAgent.indexOf("Edge") > -1; //判断是否IE的Edge浏览器
            var isFF = userAgent.indexOf("Firefox") > -1; //判断是否Firefox浏览器
//            var isSafari = userAgent.indexOf("Safari") > -1 && userAgent.indexOf("Chrome") == -1; //判断是否Safari浏览器
//            var isChrome = userAgent.indexOf("Chrome") > -1 && userAgent.indexOf("Safari") > -1; //判断Chrome浏览器
            var isChrome = userAgent.indexOf("Chrome") && window.chrome > -1;
            if (isIE) {
                var reIE = new RegExp("MSIE (\\d+\\.\\d+);");
                reIE.test(userAgent);
                var fIEVersion = parseFloat(RegExp["$1"]);
                if(fIEVersion < 10) {
                    window.location.href='./updateBrowser.html'
                }
            }
        }());
        $(document).on('keyup',function (e) {
            if (e.keyCode==13) {
                login();
            }                       
        });
        function login(){
            var uname=$("#uname").val();
            var pwd=$("#pwd").val();
            if(uname.length==0 || pwd.length==0){
                layer.msg("请输入用户名或密码");
                return
            };
            var data={
                command:"usr/login",
                accountname:uname,
                password:pwd,
                type:2
            };
            function callback(res){
                setCookie("uid",res.userid);
                setCookie("sid",res.sessionid);
                setCookie("uname",res.name);
                window.location.href="index.html";
            };
            function errcodefn1(res){
                if(res.errcode==1 || res.errcode==47){
                    layer.msg("用户名或密码错误")
                }else{
                    layer.msg(res.errdesc)
                }
            };
            post("/usr/login",data,callback,errcodefn1,errfn)
        };
        function changeIcon(elem,icon,action){
            if(icon=="uname" && action=='focus'){
                $(elem).prev().css({backgroundImage:"url('../../images/scmp/zhanghao-h.png')"})
            };
            if(icon=="pwd" && action=='focus'){
                $(elem).prev().css({backgroundImage:"url('../../images/scmp/mima-h.png')"})
            };
            if(icon=="uname" && action=='blur'){
                $(elem).prev().css({backgroundImage:"url('../../images/scmp/zhanghao.png')"})
            };
            if(icon=="pwd" && action=='blur'){
                $(elem).prev().css({backgroundImage:"url('../../images/scmp/mima.png')"})
            };
        };
        function toggleChoose(elem){
            $(elem).toggleClass("mulyes");
        }
    </script>
</body>
</html>