<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>培训学员</title>
    <script src="../../js/jquery-1.11.3.js"></script>
    <script src="../../layer/xie/layer1.js"></script>
    <script src="../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <script src="../../js/vue.js"></script>
    <script src="../../js/scmp/common.js"></script>
    <link rel="stylesheet" href="../../bootstrap-3.3.5-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/scmp/scmpcommon.css">
</head>
<style>
    #title{
        background-color: #E5E6E8;
        height:40px;
        line-height: 40px;
        padding-left:20px;
    }
    #header>p{
        position: absolute;
        top:0;
        left:0;
    }
    #header{
        position: relative;
        overflow: hidden;
        margin-top:20px;
        height:44px;
    }
    #courseTable{
        margin-top:15px;
        height:426px;
        overflow: auto;
    }
</style>
<body>
    <div class="container-fluid" v-cloak="">
        <div id="title">培训学员</div>
        <div id="content">
            <div id="header">
                <p>
                    <button class="btn btn-primary" onclick="addstudent()">新建</button>
                </p>
            </div>
            <div id="courseTable">
                <table class="m0 table table-bordered table-striped table-hover f12">
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>姓名</th>
                            <th>手机号</th>
                            <th>邮箱</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="(value,index) in studentlist" :data-id="value.wxstdid">
                            <td>{{index+1}}</td>
                            <td>{{value.wxstdname}}</td>
                            <td>{{value.mobile}}</td>
                            <td>{{value.email}}</td>
                            <td>{{value.status}}</td>
                            <td>
							<button type="button" class="btn btn-primary"  @click="show_st(value)">查看</button>
							<button type="button" class="btn btn-primary"  @click="edui_st(value)">修改</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
<script>
    var vm=new Vue({
        el:'.container-fluid',
        data:{
			studentlist:[],
        },
		mounted: function() {
			this.show_stu();
		},
        methods:{
        	show_stu:function(){
        		var self=this
				var data={
					command:'user/wxstudentlist',//接口地址
					sessionid:getCookie('sid'),
					loginid:getCookie('uid'),
				};
				function callback(res){
					self.studentlist=res.wxstudentlist;
				};
				post('/user/wxstudentlist',data,callback,errcodefn,errfn)
        	},
        	show_st:function(value){
		    		layer.open({
			                type: 2,
			                title: value.wxstdname+'-学生信息详情',
			                shadeClose: true,
			                shade: 0.8,
			                area: ['95%', '50%'],
			                content: 'studentwx_detail.html?wxstdid='+value.wxstdid,
			            });
				},
			edui_st:function(value){
		    		layer.open({
			                type: 2,
			                title: value.wxstdname+'-学生信息详情',
			                shadeClose: true,
			                shade: 0.8,
			                area: ['95%', '65%'],
			                content: 'studentwx_edui.html?wxstdid='+value.wxstdid,
			            });
				},
        	
        }
    });
    function addstudent(){
        layer.open({
        	type:2,
            title: '新建校外学员',
            shadeClose: true,
            shade: 0.7,
            area: ['95%', '65%'],
            content: 'studentwx_add.html',
        });
    };
</script>
</body>
</html>