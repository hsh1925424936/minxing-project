<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <title>成绩核查登录</title>
  <link rel="stylesheet" href="../../css/scorereview/checkScoreLogin.css">
  <script type="text/javascript" src="../../js/jquery-1.11.3.js"></script>
  <script src="../../js/skillcontestweb/methods.js"></script>
  <style type="text/css">
      #hint{
          width:240px;
          height:32px;
          line-height:32px;
          background-color: #333333;
          border-radius: 6px;
          text-align: center;
          font-size: 16px;
          color:white;
          margin:0 auto;
          position:absolute;
          left:41px;
          top:-32px;
      }
  </style>
 </head>
 <body>
	<div id="header">
        <p>武汉大学医学部第三届临床医学专业学生临床技能竞赛</p>
        <h1 id="stationNum">成绩核查</h1>
    </div>
	<div id="content">
        <div id="hint" class="hide"></div>
		<input type="text" placeholder="输入用户名" id="uname">
		<input type="password" placeholder="输入密码" id="pwd">
		<p class="btnBlue" id="login">登录</p>
	</div>
    <script>
        var uid="";
        $("#uname").keydown(function(){
            $("#hint").fadeOut();
        });
        $("#pwd").keydown(function(){
            $("#hint").fadeOut();
        });
        $("#login").click(function () {
            if($("#uname").val().length==0){
                $("#hint").fadeIn();
                $("#hint").html("用户名不能为空！");
            }
            else if($("#pwd").val().length==0){
                $("#hint").fadeIn();
                $("#hint").html("密码不能为空！");
            }
            else{
                $("#hint").fadeOut();
                function successhref(msg){
                    uid = msg.userid;
                    window.location.href = "checkScore.html?uname="+$("#uname").val();
                };
                function  errorFuntion(msg){
                    $("#hint").fadeIn();
                    $("#hint").html(msg.errdesc);
                };
                function  errorF(){
                    $("#hint").fadeIn();
                    $("#hint").html("连接服务失败，请稍后再试");
                };
                //平台层登录接口输入参数：command:usr/login，accountname，password
                var json={
                    command:"usr/login",
                    accountname:$("#uname").val(),
                    password:$("#pwd").val()
                };
                console.log(json.accountname+json.password);
                postJson( "/usr/login",json,successhref,errorFuntion,errorF);
            }
        })
    </script>
 </body>
</html>
