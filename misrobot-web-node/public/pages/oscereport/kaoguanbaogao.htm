<!DOCTYPE HTML>
<!-- saved from url=(0095)http://zd.aliyun.3322.org:8080/misrobot-service/report/examinerreport -->
<!DOCTYPE html PUBLIC "" ""><HTML lang="en"><HEAD><META content="IE=11.0000" 
http-equiv="X-UA-Compatible">
     
<META charset="UTF-8">     
<META http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">     
<META name="viewport" content="width=device-width, initial-scale=1.0">     
<TITLE>考官考试报告</TITLE>     <LINK href="kaoguanbaogao_files/report.css" rel="stylesheet" 
type="text/css"> 
<SCRIPT src="kaoguanbaogao_files/jquery-1.11.1.min.js" type="text/javascript" charset="utf-8"></SCRIPT>

<SCRIPT src="kaoguanbaogao_files/echarts-all.js" type="text/javascript" charset="utf-8"></SCRIPT>

<SCRIPT src="kaoguanbaogao_files/echarts.min.js" type="text/javascript" charset="utf-8"></SCRIPT>

<META name="GENERATOR" content="MSHTML 11.00.10570.1001"></HEAD> 
<BODY>
<DIV id="container">
<H2 id="testName">OSCE考试考官分析报告</H2>
<DIV class="contentbox">
<DIV class="userinfo">
<UL>
  <LI><SPAN class="fontstyle">姓名</SPAN>                         <SPAN class="usenm" 
  id="examiner"></SPAN>                     </LI>
  <LI><SPAN class="fontstyle">工号</SPAN>                         <SPAN class="usenm" 
  id="jobNo"></SPAN>                     </LI>
  <LI><SPAN class="fontstyle">考站</SPAN>                         <SPAN class="usenm" 
  id="station"></SPAN>                     </LI>
  <LI><SPAN class="fontstyle">教室</SPAN>                         <SPAN class="usenm" 
  id="classroom"></SPAN>                     </LI>
  <LI><SPAN class="fontstyle">方式</SPAN>                         <SPAN class="usenm" 
  id="testWay"></SPAN>                     </LI></UL></DIV>
<DIV class="score">
<DIV class="score-classfiy fontalgin">平均分</DIV>
<DIV class="score-classfiy"><SPAN class="score-numb" id="avgScore1"></SPAN> 分    
             </DIV>
<DIV class="score-classfiy fontalgin">通过率 <SPAN 
id="passRate"></SPAN>％</DIV></DIV><!--各考站成绩分析-->             
<DIV class="contentbox">
<TABLE width="100%" class="datalist" id="tabkeyvalue" border="0" cellspacing="0" 
cellpadding="0">
  <TBODY>
  <TR>
    <TD style="text-align: center; background-color: rgb(204, 204, 204);" 
    colspan="2">成绩关键点分值</TD></TR>
  <TR>
    <TD>项目</TD>
    <TD>分值</TD></TR>
  <TR>
    <TD>最高分</TD>
    <TD id="maxScore">-</TD></TR>
  <TR>
    <TD>中值</TD>
    <TD id="mediuScore">-</TD></TR>
  <TR>
    <TD>平均分</TD>
    <TD id="avgScore">-</TD></TR>
  <TR>
    <TD>最低分</TD>
    <TD id="minScore">-</TD></TR></TBODY></TABLE></DIV>
<DIV class="distrivution">成绩区段人数分布</DIV>
<DIV class="chart">
<DIV class="covar"></DIV>
<DIV id="main" style="width: 100%; height: 350px; float: left;"></DIV></DIV><!-- 考生成绩列表 --> 
            
<DIV class="contentbox">
<TABLE width="100%" class="datalist" id="tabscorelist" border="0" cellspacing="0" 
cellpadding="0">
  <TBODY>
  <TR>
    <TH style="text-align: center; background-color: rgb(204, 204, 204);" 
    colspan="7">考生成绩列表</TH></TR>
  <TR>
    <TH style="width: 20%;">排名</TH>
    <TH>姓名</TH>
    <TH>成绩</TH></TR></TBODY></TABLE></DIV></DIV></DIV>
<SCRIPT type="text/javascript">
	$( document ).ready(function() {
		  var jsondata = null;
		  var data = {"errcode":"0","errdesc":"success","reportinfo":{"sectiondistribution":{"s70to80":3,"lessthan60":0,"s60to70":0,"s80to90":3,"morethan90":2},"rankinglist":[{"ranking":1,"score":93,"name":"陈瑛"},{"ranking":2,"score":90,"name":"高星"},{"ranking":3,"score":86,"name":"黄志恒"},{"ranking":4,"score":85,"name":"石岩"},{"ranking":5,"score":84,"name":"黎玉燕"},{"ranking":6,"score":79,"name":"毛昳涵"},{"ranking":7,"score":78,"name":"李永达"},{"ranking":8,"score":77,"name":"汤欢娜"}],"basicinfo":{"examinername":"陈正益","testway":"OSCE","testname":"2011级临床医学八年制学生医学综合考试II临床综合能力考核","stationname":"问诊2","teachercode":"0629","classroomno":"2118"},"keyvalue":{"avgscore":84,"passrate":1,"minscore":77,"totalcount":8,"maxscore":93,"medianscore":84.5},"rfss":100},"command":"osce/report/examinerreport"};
		  if(data && (data.errcode == "0" || data.errcode == 0)){   
              jsondata = data.reportinfo;
		  }
		  
        //console.log(jsondata);

        /*
		数据格式：{"1":{"command": "report/testreport", "errdesc":"invalid command.","errcode":"11",
		   	   "reportinfo":
		{
			"basicinfo": {
			    “testName” : “OSCE考试考官分析报告”,
			        "examiner": "李天玉",
			        "jobNo": "777888",
			        "station": "第二站－病史分析",
			        "classroom": "601-1",
			        "testWay": "OSCE"
			    },
			    "keyValue": {
			        "maxScore": 90,
			        "mediuScore": 70,
			        "avgScore": 67.82,
			        "minScore": 48,
			        "passRate": 75.69,
			        "totalNum": 180
			    },
			    "sectiondistribution": {
			        "lessthan60": 9,
			        "s60to70": 82,
			        "s70to80": 41,
			        "s80to90": 34,
			        "morethan90": 14
			    }
			}}}
        */

        // 基于准备好的dom，初始化echarts实例
		if(jsondata){
			  $("#testName").text(jsondata.basicinfo.testname + "考官分析报告");
              $("#examiner").text(jsondata.basicinfo.examinername);
			  $("#jobNo").text(jsondata.basicinfo.teachercode);  
			  $("#station").text(jsondata.basicinfo.stationname);
			  $("#classroom").text(jsondata.basicinfo.classroomno);
			  $("#testtime").text(jsondata.basicinfo.testtime);
			  if(jsondata.basicinfo.testway){
                  $("#testWay").text(jsondata.basicinfo.testway);
			  }
			  
             
			  
          
		    if(jsondata.keyvalue){
				if(jsondata.keyvalue.avgscore){
                  $("#avgScore1").text(jsondata.keyvalue.avgscore.toFixed(2));
				  $("#avgScore").text(jsondata.keyvalue.avgscore.toFixed(2));
			    }
              
				
			    if(jsondata.keyvalue.passrate != undefined){
                  $("#passRate").text(((jsondata.keyvalue.passrate)*100).toFixed(2));
			    }

                if(jsondata.keyvalue.maxscore){
                    $("#maxScore").text(jsondata.keyvalue.maxscore.toFixed(2));
				}

				if(jsondata.keyvalue.medianscore){
                    $("#mediuScore").text(jsondata.keyvalue.medianscore.toFixed(2));  
				}
                
                if(jsondata.keyvalue.minscore){
                    $("#minScore").text(jsondata.keyvalue.minscore.toFixed(2));
                }
			   
            }

			if(jsondata.sectiondistribution && jsondata.keyvalue){
				var myChart = echarts.init(document.getElementById('main'));

				option = {
					title : {
						text: '总人数：' + jsondata.keyvalue.totalcount + '人',
						subtext: '',
						x:'right'
					},
					tooltip : {
						trigger: 'item',
						formatter: "{a} <br/>{b} : {c} ({d}%)"
					},
					legend: {
						orient: 'vertical',
						left: 'left',
						data: [''+(jsondata.rfss*0.6).toFixed(2)+'分以下：' + jsondata.sectiondistribution.lessthan60 + '人',
							''+(jsondata.rfss*0.6).toFixed(2)+'－'+(jsondata.rfss*0.7).toFixed(2)+'分：' + jsondata.sectiondistribution.s60to70 + '人',
							''+(jsondata.rfss*0.7).toFixed(2)+'－'+(jsondata.rfss*0.8).toFixed(2)+'分：' + jsondata.sectiondistribution.s70to80 + '人',
							''+(jsondata.rfss*0.8).toFixed(2)+'－'+(jsondata.rfss*0.9).toFixed(2)+'分：' + jsondata.sectiondistribution.s80to90 + '人',
							''+(jsondata.rfss*0.9).toFixed(2)+'－'+jsondata.rfss.toFixed(2)+'分：' + jsondata.sectiondistribution.morethan90 + '人']
					},
					series : [
						{
							name: '访问来源',
							type: 'pie',
							radius : '30%',
							center: ['50%', '60%'],
							data:[
								{value: jsondata.sectiondistribution.lessthan60, name:''+(jsondata.rfss*0.6).toFixed(2)+'分以下：' + jsondata.sectiondistribution.lessthan60 + '人'},
								{value: jsondata.sectiondistribution.s60to70, name:''+(jsondata.rfss*0.6).toFixed(2)+'－'+(jsondata.rfss*0.7).toFixed(2)+'分：' + jsondata.sectiondistribution.s60to70 + '人',},
								{value: jsondata.sectiondistribution.s70to80, name:''+(jsondata.rfss*0.7).toFixed(2)+'－'+(jsondata.rfss*0.8).toFixed(2)+'分：' + jsondata.sectiondistribution.s70to80 + '人'},
								{value: jsondata.sectiondistribution.s80to90, name:''+(jsondata.rfss*0.8).toFixed(2)+'－'+(jsondata.rfss*0.9).toFixed(2)+'分：' + jsondata.sectiondistribution.s80to90 + '人'},
								{value: jsondata.sectiondistribution.morethan90, name:''+(jsondata.rfss*0.9).toFixed(2)+'－'+jsondata.rfss.toFixed(2)+'分：' + jsondata.sectiondistribution.morethan90 + '人'}
							],
							itemStyle: {
								emphasis: {
									shadowBlur: 10,
									shadowOffsetX: 0,
									shadowColor: 'rgba(0, 0, 0, 0.5)'
								}
							}
						}
					]
				};

	
				// 使用刚指定的配置项和数据显示图表。
				myChart.setOption(option);
            }
        }
        
        
		// 学生成绩列表
        if(jsondata.rankinglist){
           
		  var $tabscorelist = $("#tabscorelist");

		  for(var i=0; i< jsondata.rankinglist.length; i++){
              
			var tmpstr = "<tr>";
            var str1 = "<td style='width: 20%'>" +  jsondata.rankinglist[i].ranking + "</td>";
			tmpstr = tmpstr + str1;
			
            var str2 = "<td>" +  jsondata.rankinglist[i].name + "</td>";
			tmpstr = tmpstr + str2;
			
			var str3 = "<td>" +  jsondata.rankinglist[i].score.toFixed(2) + "</td>";
		    tmpstr = tmpstr + str3;
		  
		    tmpstr = tmpstr + "</tr>";
		  
		    $tabscorelist.append(tmpstr);
		 
		  }
  
       }
		
		
    });   

    </SCRIPT>
 </BODY></HTML>
